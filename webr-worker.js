"use strict";var oo=Object.create;var Us=Object.defineProperty;var lo=Object.getOwnPropertyDescriptor;var co=Object.getOwnPropertyNames;var uo=Object.getPrototypeOf,fo=Object.prototype.hasOwnProperty;var Ws=e=>{throw TypeError(e)};var V=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var ho=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of co(r))!fo.call(e,s)&&s!==t&&Us(e,s,{get:()=>r[s],enumerable:!(n=lo(r,s))||n.enumerable});return e};var Lt=(e,r,t)=>(t=e!=null?oo(uo(e)):{},ho(r||!e||!e.__esModule?Us(t,"default",{value:e,enumerable:!0}):t,e));var xn=(e,r,t)=>r.has(e)||Ws("Cannot "+t);var T=(e,r,t)=>(xn(e,r,"read from private field"),t?t.call(e):r.get(e)),W=(e,r,t)=>r.has(e)?Ws("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,t),j=(e,r,t,n)=>(xn(e,r,"write to private field"),n?n.call(e,t):r.set(e,t),t),Le=(e,r,t)=>(xn(e,r,"access private method"),t);var Cs=(e,r,t,n)=>({set _(s){j(e,r,s,t)},get _(){return T(e,r,n)}});var $t=V(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.getUint64=ae.getInt64=ae.setInt64=ae.setUint64=ae.UINT32_MAX=void 0;ae.UINT32_MAX=4294967295;function _o(e,r,t){let n=t/4294967296,s=t;e.setUint32(r,n),e.setUint32(r+4,s)}ae.setUint64=_o;function bo(e,r,t){let n=Math.floor(t/4294967296),s=t;e.setUint32(r,n),e.setUint32(r+4,s)}ae.setInt64=bo;function wo(e,r){let t=e.getInt32(r),n=e.getUint32(r+4);return t*4294967296+n}ae.getInt64=wo;function Ro(e,r){let t=e.getUint32(r),n=e.getUint32(r+4);return t*4294967296+n}ae.getUint64=Ro});var Br=V(X=>{"use strict";var An,Dn,Pn;Object.defineProperty(X,"__esModule",{value:!0});X.utf8DecodeTD=X.TEXT_DECODER_THRESHOLD=X.utf8DecodeJs=X.utf8EncodeTE=X.TEXT_ENCODER_THRESHOLD=X.utf8EncodeJs=X.utf8Count=void 0;var Zs=$t(),Lr=(typeof process>"u"||((An=process==null?void 0:process.env)===null||An===void 0?void 0:An.TEXT_ENCODING)!=="never")&&typeof TextEncoder<"u"&&typeof TextDecoder<"u";function xo(e){let r=e.length,t=0,n=0;for(;n<r;){let s=e.charCodeAt(n++);if((s&4294967168)===0){t++;continue}else if((s&4294965248)===0)t+=2;else{if(s>=55296&&s<=56319&&n<r){let a=e.charCodeAt(n);(a&64512)===56320&&(++n,s=((s&1023)<<10)+(a&1023)+65536)}(s&4294901760)===0?t+=3:t+=4}}return t}X.utf8Count=xo;function Eo(e,r,t){let n=e.length,s=t,a=0;for(;a<n;){let i=e.charCodeAt(a++);if((i&4294967168)===0){r[s++]=i;continue}else if((i&4294965248)===0)r[s++]=i>>6&31|192;else{if(i>=55296&&i<=56319&&a<n){let o=e.charCodeAt(a);(o&64512)===56320&&(++a,i=((i&1023)<<10)+(o&1023)+65536)}(i&4294901760)===0?(r[s++]=i>>12&15|224,r[s++]=i>>6&63|128):(r[s++]=i>>18&7|240,r[s++]=i>>12&63|128,r[s++]=i>>6&63|128)}r[s++]=i&63|128}}X.utf8EncodeJs=Eo;var Vt=Lr?new TextEncoder:void 0;X.TEXT_ENCODER_THRESHOLD=Lr?typeof process<"u"&&((Dn=process==null?void 0:process.env)===null||Dn===void 0?void 0:Dn.TEXT_ENCODING)!=="force"?200:0:Zs.UINT32_MAX;function vo(e,r,t){r.set(Vt.encode(e),t)}function So(e,r,t){Vt.encodeInto(e,r.subarray(t))}X.utf8EncodeTE=Vt!=null&&Vt.encodeInto?So:vo;var ko=4096;function To(e,r,t){let n=r,s=n+t,a=[],i="";for(;n<s;){let o=e[n++];if((o&128)===0)a.push(o);else if((o&224)===192){let d=e[n++]&63;a.push((o&31)<<6|d)}else if((o&240)===224){let d=e[n++]&63,l=e[n++]&63;a.push((o&31)<<12|d<<6|l)}else if((o&248)===240){let d=e[n++]&63,l=e[n++]&63,u=e[n++]&63,b=(o&7)<<18|d<<12|l<<6|u;b>65535&&(b-=65536,a.push(b>>>10&1023|55296),b=56320|b&1023),a.push(b)}else a.push(o);a.length>=ko&&(i+=String.fromCharCode(...a),a.length=0)}return a.length>0&&(i+=String.fromCharCode(...a)),i}X.utf8DecodeJs=To;var Ao=Lr?new TextDecoder:null;X.TEXT_DECODER_THRESHOLD=Lr?typeof process<"u"&&((Pn=process==null?void 0:process.env)===null||Pn===void 0?void 0:Pn.TEXT_DECODER)!=="force"?200:0:Zs.UINT32_MAX;function Do(e,r,t){let n=e.subarray(r,r+t);return Ao.decode(n)}X.utf8DecodeTD=Do});var On=V(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.ExtData=void 0;var Mn=class{constructor(r,t){this.type=r,this.data=t}};zr.ExtData=Mn});var Hr=V(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.DecodeError=void 0;var In=class e extends Error{constructor(r){super(r);let t=Object.create(e.prototype);Object.setPrototypeOf(this,t),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:e.name})}};jr.DecodeError=In});var Nn=V(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.timestampExtension=Z.decodeTimestampExtension=Z.decodeTimestampToTimeSpec=Z.encodeTimestampExtension=Z.encodeDateToTimeSpec=Z.encodeTimeSpecToTimestamp=Z.EXT_TIMESTAMP=void 0;var Po=Hr(),Js=$t();Z.EXT_TIMESTAMP=-1;var Mo=4294967296-1,Oo=17179869184-1;function Xs({sec:e,nsec:r}){if(e>=0&&r>=0&&e<=Oo)if(r===0&&e<=Mo){let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e),t}else{let t=e/4294967296,n=e&4294967295,s=new Uint8Array(8),a=new DataView(s.buffer);return a.setUint32(0,r<<2|t&3),a.setUint32(4,n),s}else{let t=new Uint8Array(12),n=new DataView(t.buffer);return n.setUint32(0,r),(0,Js.setInt64)(n,4,e),t}}Z.encodeTimeSpecToTimestamp=Xs;function Gs(e){let r=e.getTime(),t=Math.floor(r/1e3),n=(r-t*1e3)*1e6,s=Math.floor(n/1e9);return{sec:t+s,nsec:n-s*1e9}}Z.encodeDateToTimeSpec=Gs;function Ks(e){if(e instanceof Date){let r=Gs(e);return Xs(r)}else return null}Z.encodeTimestampExtension=Ks;function Ys(e){let r=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:r.getUint32(0),nsec:0};case 8:{let t=r.getUint32(0),n=r.getUint32(4),s=(t&3)*4294967296+n,a=t>>>2;return{sec:s,nsec:a}}case 12:{let t=(0,Js.getInt64)(r,4),n=r.getUint32(0);return{sec:t,nsec:n}}default:throw new Po.DecodeError(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}Z.decodeTimestampToTimeSpec=Ys;function Qs(e){let r=Ys(e);return new Date(r.sec*1e3+r.nsec/1e6)}Z.decodeTimestampExtension=Qs;Z.timestampExtension={type:Z.EXT_TIMESTAMP,encode:Ks,decode:Qs}});var Vr=V($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.ExtensionCodec=void 0;var qr=On(),Io=Nn(),Zt=class{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(Io.timestampExtension)}register({type:r,encode:t,decode:n}){if(r>=0)this.encoders[r]=t,this.decoders[r]=n;else{let s=1+r;this.builtInEncoders[s]=t,this.builtInDecoders[s]=n}}tryToEncode(r,t){for(let n=0;n<this.builtInEncoders.length;n++){let s=this.builtInEncoders[n];if(s!=null){let a=s(r,t);if(a!=null){let i=-1-n;return new qr.ExtData(i,a)}}}for(let n=0;n<this.encoders.length;n++){let s=this.encoders[n];if(s!=null){let a=s(r,t);if(a!=null){let i=n;return new qr.ExtData(i,a)}}}return r instanceof qr.ExtData?r:null}decode(r,t,n){let s=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return s?s(r,t,n):new qr.ExtData(t,r)}};$r.ExtensionCodec=Zt;Zt.defaultCodec=new Zt});var Un=V(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.createDataView=yt.ensureUint8Array=void 0;function ea(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}yt.ensureUint8Array=ea;function No(e){if(e instanceof ArrayBuffer)return new DataView(e);let r=ea(e);return new DataView(r.buffer,r.byteOffset,r.byteLength)}yt.createDataView=No});var Cn=V(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.Encoder=fe.DEFAULT_INITIAL_BUFFER_SIZE=fe.DEFAULT_MAX_DEPTH=void 0;var Jt=Br(),Uo=Vr(),ta=$t(),Wo=Un();fe.DEFAULT_MAX_DEPTH=100;fe.DEFAULT_INITIAL_BUFFER_SIZE=2048;var Wn=class{constructor(r=Uo.ExtensionCodec.defaultCodec,t=void 0,n=fe.DEFAULT_MAX_DEPTH,s=fe.DEFAULT_INITIAL_BUFFER_SIZE,a=!1,i=!1,o=!1,d=!1){this.extensionCodec=r,this.context=t,this.maxDepth=n,this.initialBufferSize=s,this.sortKeys=a,this.forceFloat32=i,this.ignoreUndefined=o,this.forceIntegerToFloat=d,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}reinitializeState(){this.pos=0}encodeSharedRef(r){return this.reinitializeState(),this.doEncode(r,1),this.bytes.subarray(0,this.pos)}encode(r){return this.reinitializeState(),this.doEncode(r,1),this.bytes.slice(0,this.pos)}doEncode(r,t){if(t>this.maxDepth)throw new Error(`Too deep objects in depth ${t}`);r==null?this.encodeNil():typeof r=="boolean"?this.encodeBoolean(r):typeof r=="number"?this.encodeNumber(r):typeof r=="string"?this.encodeString(r):this.encodeObject(r,t)}ensureBufferSizeToWrite(r){let t=this.pos+r;this.view.byteLength<t&&this.resizeBuffer(t*2)}resizeBuffer(r){let t=new ArrayBuffer(r),n=new Uint8Array(t),s=new DataView(t);n.set(this.bytes),this.view=s,this.bytes=n}encodeNil(){this.writeU8(192)}encodeBoolean(r){r===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(r){Number.isSafeInteger(r)&&!this.forceIntegerToFloat?r>=0?r<128?this.writeU8(r):r<256?(this.writeU8(204),this.writeU8(r)):r<65536?(this.writeU8(205),this.writeU16(r)):r<4294967296?(this.writeU8(206),this.writeU32(r)):(this.writeU8(207),this.writeU64(r)):r>=-32?this.writeU8(224|r+32):r>=-128?(this.writeU8(208),this.writeI8(r)):r>=-32768?(this.writeU8(209),this.writeI16(r)):r>=-2147483648?(this.writeU8(210),this.writeI32(r)):(this.writeU8(211),this.writeI64(r)):this.forceFloat32?(this.writeU8(202),this.writeF32(r)):(this.writeU8(203),this.writeF64(r))}writeStringHeader(r){if(r<32)this.writeU8(160+r);else if(r<256)this.writeU8(217),this.writeU8(r);else if(r<65536)this.writeU8(218),this.writeU16(r);else if(r<4294967296)this.writeU8(219),this.writeU32(r);else throw new Error(`Too long string: ${r} bytes in UTF-8`)}encodeString(r){if(r.length>Jt.TEXT_ENCODER_THRESHOLD){let s=(0,Jt.utf8Count)(r);this.ensureBufferSizeToWrite(5+s),this.writeStringHeader(s),(0,Jt.utf8EncodeTE)(r,this.bytes,this.pos),this.pos+=s}else{let s=(0,Jt.utf8Count)(r);this.ensureBufferSizeToWrite(5+s),this.writeStringHeader(s),(0,Jt.utf8EncodeJs)(r,this.bytes,this.pos),this.pos+=s}}encodeObject(r,t){let n=this.extensionCodec.tryToEncode(r,this.context);if(n!=null)this.encodeExtension(n);else if(Array.isArray(r))this.encodeArray(r,t);else if(ArrayBuffer.isView(r))this.encodeBinary(r);else if(typeof r=="object")this.encodeMap(r,t);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(r)}`)}encodeBinary(r){let t=r.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else if(t<4294967296)this.writeU8(198),this.writeU32(t);else throw new Error(`Too large binary: ${t}`);let n=(0,Wo.ensureUint8Array)(r);this.writeU8a(n)}encodeArray(r,t){let n=r.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else if(n<4294967296)this.writeU8(221),this.writeU32(n);else throw new Error(`Too large array: ${n}`);for(let s of r)this.doEncode(s,t+1)}countWithoutUndefined(r,t){let n=0;for(let s of t)r[s]!==void 0&&n++;return n}encodeMap(r,t){let n=Object.keys(r);this.sortKeys&&n.sort();let s=this.ignoreUndefined?this.countWithoutUndefined(r,n):n.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(let a of n){let i=r[a];this.ignoreUndefined&&i===void 0||(this.encodeString(a),this.doEncode(i,t+1))}}encodeExtension(r){let t=r.data.length;if(t===1)this.writeU8(212);else if(t===2)this.writeU8(213);else if(t===4)this.writeU8(214);else if(t===8)this.writeU8(215);else if(t===16)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else if(t<4294967296)this.writeU8(201),this.writeU32(t);else throw new Error(`Too large extension object: ${t}`);this.writeI8(r.type),this.writeU8a(r.data)}writeU8(r){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,r),this.pos++}writeU8a(r){let t=r.length;this.ensureBufferSizeToWrite(t),this.bytes.set(r,this.pos),this.pos+=t}writeI8(r){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,r),this.pos++}writeU16(r){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,r),this.pos+=2}writeI16(r){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,r),this.pos+=2}writeU32(r){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,r),this.pos+=4}writeI32(r){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,r),this.pos+=4}writeF32(r){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,r),this.pos+=4}writeF64(r){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,r),this.pos+=8}writeU64(r){this.ensureBufferSizeToWrite(8),(0,ta.setUint64)(this.view,this.pos,r),this.pos+=8}writeI64(r){this.ensureBufferSizeToWrite(8),(0,ta.setInt64)(this.view,this.pos,r),this.pos+=8}};fe.Encoder=Wn});var ra=V(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});Zr.encode=void 0;var Co=Cn(),Fo={};function Lo(e,r=Fo){return new Co.Encoder(r.extensionCodec,r.context,r.maxDepth,r.initialBufferSize,r.sortKeys,r.forceFloat32,r.ignoreUndefined,r.forceIntegerToFloat).encodeSharedRef(e)}Zr.encode=Lo});var na=V(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.prettyByte=void 0;function Bo(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}Jr.prettyByte=Bo});var sa=V(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.CachedKeyDecoder=void 0;var zo=Br(),jo=16,Ho=16,Fn=class{constructor(r=jo,t=Ho){this.maxKeyLength=r,this.maxLengthPerKey=t,this.hit=0,this.miss=0,this.caches=[];for(let n=0;n<this.maxKeyLength;n++)this.caches.push([])}canBeCached(r){return r>0&&r<=this.maxKeyLength}find(r,t,n){let s=this.caches[n-1];e:for(let a of s){let i=a.bytes;for(let o=0;o<n;o++)if(i[o]!==r[t+o])continue e;return a.str}return null}store(r,t){let n=this.caches[r.length-1],s={bytes:r,str:t};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=s:n.push(s)}decode(r,t,n){let s=this.find(r,t,n);if(s!=null)return this.hit++,s;this.miss++;let a=(0,zo.utf8DecodeJs)(r,t,n),i=Uint8Array.prototype.slice.call(r,t,t+n);return this.store(i,a),a}};Xr.CachedKeyDecoder=Fn});var Gr=V(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.Decoder=xe.DataViewIndexOutOfBoundsError=void 0;var Ln=na(),qo=Vr(),Qe=$t(),Bn=Br(),zn=Un(),$o=sa(),Re=Hr(),Vo=e=>{let r=typeof e;return r==="string"||r==="number"},Xt=-1,Hn=new DataView(new ArrayBuffer(0)),Zo=new Uint8Array(Hn.buffer);xe.DataViewIndexOutOfBoundsError=(()=>{try{Hn.getInt8(0)}catch(e){return e.constructor}throw new Error("never reached")})();var aa=new xe.DataViewIndexOutOfBoundsError("Insufficient data"),Jo=new $o.CachedKeyDecoder,jn=class{constructor(r=qo.ExtensionCodec.defaultCodec,t=void 0,n=Qe.UINT32_MAX,s=Qe.UINT32_MAX,a=Qe.UINT32_MAX,i=Qe.UINT32_MAX,o=Qe.UINT32_MAX,d=Jo){this.extensionCodec=r,this.context=t,this.maxStrLength=n,this.maxBinLength=s,this.maxArrayLength=a,this.maxMapLength=i,this.maxExtLength=o,this.keyDecoder=d,this.totalPos=0,this.pos=0,this.view=Hn,this.bytes=Zo,this.headByte=Xt,this.stack=[]}reinitializeState(){this.totalPos=0,this.headByte=Xt,this.stack.length=0}setBuffer(r){this.bytes=(0,zn.ensureUint8Array)(r),this.view=(0,zn.createDataView)(this.bytes),this.pos=0}appendBuffer(r){if(this.headByte===Xt&&!this.hasRemaining(1))this.setBuffer(r);else{let t=this.bytes.subarray(this.pos),n=(0,zn.ensureUint8Array)(r),s=new Uint8Array(t.length+n.length);s.set(t),s.set(n,t.length),this.setBuffer(s)}}hasRemaining(r){return this.view.byteLength-this.pos>=r}createExtraByteError(r){let{view:t,pos:n}=this;return new RangeError(`Extra ${t.byteLength-n} of ${t.byteLength} byte(s) found at buffer[${r}]`)}decode(r){this.reinitializeState(),this.setBuffer(r);let t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t}*decodeMulti(r){for(this.reinitializeState(),this.setBuffer(r);this.hasRemaining(1);)yield this.doDecodeSync()}async decodeAsync(r){let t=!1,n;for await(let o of r){if(t)throw this.createExtraByteError(this.totalPos);this.appendBuffer(o);try{n=this.doDecodeSync(),t=!0}catch(d){if(!(d instanceof xe.DataViewIndexOutOfBoundsError))throw d}this.totalPos+=this.pos}if(t){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return n}let{headByte:s,pos:a,totalPos:i}=this;throw new RangeError(`Insufficient data in parsing ${(0,Ln.prettyByte)(s)} at ${i} (${a} in the current buffer)`)}decodeArrayStream(r){return this.decodeMultiAsync(r,!0)}decodeStream(r){return this.decodeMultiAsync(r,!1)}async*decodeMultiAsync(r,t){let n=t,s=-1;for await(let a of r){if(t&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a),n&&(s=this.readArraySize(),n=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(i){if(!(i instanceof xe.DataViewIndexOutOfBoundsError))throw i}this.totalPos+=this.pos}}doDecodeSync(){e:for(;;){let r=this.readHeadByte(),t;if(r>=224)t=r-256;else if(r<192)if(r<128)t=r;else if(r<144){let s=r-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else t={}}else if(r<160){let s=r-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else t=[]}else{let s=r-160;t=this.decodeUtf8String(s,0)}else if(r===192)t=null;else if(r===194)t=!1;else if(r===195)t=!0;else if(r===202)t=this.readF32();else if(r===203)t=this.readF64();else if(r===204)t=this.readU8();else if(r===205)t=this.readU16();else if(r===206)t=this.readU32();else if(r===207)t=this.readU64();else if(r===208)t=this.readI8();else if(r===209)t=this.readI16();else if(r===210)t=this.readI32();else if(r===211)t=this.readI64();else if(r===217){let s=this.lookU8();t=this.decodeUtf8String(s,1)}else if(r===218){let s=this.lookU16();t=this.decodeUtf8String(s,2)}else if(r===219){let s=this.lookU32();t=this.decodeUtf8String(s,4)}else if(r===220){let s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else t=[]}else if(r===221){let s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else t=[]}else if(r===222){let s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else t={}}else if(r===223){let s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else t={}}else if(r===196){let s=this.lookU8();t=this.decodeBinary(s,1)}else if(r===197){let s=this.lookU16();t=this.decodeBinary(s,2)}else if(r===198){let s=this.lookU32();t=this.decodeBinary(s,4)}else if(r===212)t=this.decodeExtension(1,0);else if(r===213)t=this.decodeExtension(2,0);else if(r===214)t=this.decodeExtension(4,0);else if(r===215)t=this.decodeExtension(8,0);else if(r===216)t=this.decodeExtension(16,0);else if(r===199){let s=this.lookU8();t=this.decodeExtension(s,1)}else if(r===200){let s=this.lookU16();t=this.decodeExtension(s,2)}else if(r===201){let s=this.lookU32();t=this.decodeExtension(s,4)}else throw new Re.DecodeError(`Unrecognized type byte: ${(0,Ln.prettyByte)(r)}`);this.complete();let n=this.stack;for(;n.length>0;){let s=n[n.length-1];if(s.type===0)if(s.array[s.position]=t,s.position++,s.position===s.size)n.pop(),t=s.array;else continue e;else if(s.type===1){if(!Vo(t))throw new Re.DecodeError("The type of key must be string or number but "+typeof t);if(t==="__proto__")throw new Re.DecodeError("The key __proto__ is not allowed");s.key=t,s.type=2;continue e}else if(s.map[s.key]=t,s.readCount++,s.readCount===s.size)n.pop(),t=s.map;else{s.key=null,s.type=1;continue e}}return t}}readHeadByte(){return this.headByte===Xt&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Xt}readArraySize(){let r=this.readHeadByte();switch(r){case 220:return this.readU16();case 221:return this.readU32();default:{if(r<160)return r-144;throw new Re.DecodeError(`Unrecognized array type byte: ${(0,Ln.prettyByte)(r)}`)}}}pushMapState(r){if(r>this.maxMapLength)throw new Re.DecodeError(`Max length exceeded: map length (${r}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.push({type:1,size:r,key:null,readCount:0,map:{}})}pushArrayState(r){if(r>this.maxArrayLength)throw new Re.DecodeError(`Max length exceeded: array length (${r}) > maxArrayLength (${this.maxArrayLength})`);this.stack.push({type:0,size:r,array:new Array(r),position:0})}decodeUtf8String(r,t){var n;if(r>this.maxStrLength)throw new Re.DecodeError(`Max length exceeded: UTF-8 byte length (${r}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+t+r)throw aa;let s=this.pos+t,a;return this.stateIsMapKey()&&(!((n=this.keyDecoder)===null||n===void 0)&&n.canBeCached(r))?a=this.keyDecoder.decode(this.bytes,s,r):r>Bn.TEXT_DECODER_THRESHOLD?a=(0,Bn.utf8DecodeTD)(this.bytes,s,r):a=(0,Bn.utf8DecodeJs)(this.bytes,s,r),this.pos+=t+r,a}stateIsMapKey(){return this.stack.length>0?this.stack[this.stack.length-1].type===1:!1}decodeBinary(r,t){if(r>this.maxBinLength)throw new Re.DecodeError(`Max length exceeded: bin length (${r}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(r+t))throw aa;let n=this.pos+t,s=this.bytes.subarray(n,n+r);return this.pos+=t+r,s}decodeExtension(r,t){if(r>this.maxExtLength)throw new Re.DecodeError(`Max length exceeded: ext length (${r}) > maxExtLength (${this.maxExtLength})`);let n=this.view.getInt8(this.pos+t),s=this.decodeBinary(r,t+1);return this.extensionCodec.decode(s,n,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){let r=this.view.getUint8(this.pos);return this.pos++,r}readI8(){let r=this.view.getInt8(this.pos);return this.pos++,r}readU16(){let r=this.view.getUint16(this.pos);return this.pos+=2,r}readI16(){let r=this.view.getInt16(this.pos);return this.pos+=2,r}readU32(){let r=this.view.getUint32(this.pos);return this.pos+=4,r}readI32(){let r=this.view.getInt32(this.pos);return this.pos+=4,r}readU64(){let r=(0,Qe.getUint64)(this.view,this.pos);return this.pos+=8,r}readI64(){let r=(0,Qe.getInt64)(this.view,this.pos);return this.pos+=8,r}readF32(){let r=this.view.getFloat32(this.pos);return this.pos+=4,r}readF64(){let r=this.view.getFloat64(this.pos);return this.pos+=8,r}};xe.Decoder=jn});var qn=V(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.decodeMulti=he.decode=he.defaultDecodeOptions=void 0;var ia=Gr();he.defaultDecodeOptions={};function Xo(e,r=he.defaultDecodeOptions){return new ia.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decode(e)}he.decode=Xo;function Go(e,r=he.defaultDecodeOptions){return new ia.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decodeMulti(e)}he.decodeMulti=Go});var ca=V(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.ensureAsyncIterable=Pe.asyncIterableFromStream=Pe.isAsyncIterable=void 0;function oa(e){return e[Symbol.asyncIterator]!=null}Pe.isAsyncIterable=oa;function Ko(e){if(e==null)throw new Error("Assertion Failure: value must not be null nor undefined")}async function*la(e){let r=e.getReader();try{for(;;){let{done:t,value:n}=await r.read();if(t)return;Ko(n),yield n}}finally{r.releaseLock()}}Pe.asyncIterableFromStream=la;function Yo(e){return oa(e)?e:la(e)}Pe.ensureAsyncIterable=Yo});var da=V(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.decodeStream=pe.decodeMultiStream=pe.decodeArrayStream=pe.decodeAsync=void 0;var $n=Gr(),Vn=ca(),Kr=qn();async function Qo(e,r=Kr.defaultDecodeOptions){let t=(0,Vn.ensureAsyncIterable)(e);return new $n.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decodeAsync(t)}pe.decodeAsync=Qo;function el(e,r=Kr.defaultDecodeOptions){let t=(0,Vn.ensureAsyncIterable)(e);return new $n.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decodeArrayStream(t)}pe.decodeArrayStream=el;function ua(e,r=Kr.defaultDecodeOptions){let t=(0,Vn.ensureAsyncIterable)(e);return new $n.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decodeStream(t)}pe.decodeMultiStream=ua;function tl(e,r=Kr.defaultDecodeOptions){return ua(e,r)}pe.decodeStream=tl});var pa=V(A=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});A.decodeTimestampExtension=A.encodeTimestampExtension=A.decodeTimestampToTimeSpec=A.encodeTimeSpecToTimestamp=A.encodeDateToTimeSpec=A.EXT_TIMESTAMP=A.ExtData=A.ExtensionCodec=A.Encoder=A.DataViewIndexOutOfBoundsError=A.DecodeError=A.Decoder=A.decodeStream=A.decodeMultiStream=A.decodeArrayStream=A.decodeAsync=A.decodeMulti=A.decode=A.encode=void 0;var rl=ra();Object.defineProperty(A,"encode",{enumerable:!0,get:function(){return rl.encode}});var fa=qn();Object.defineProperty(A,"decode",{enumerable:!0,get:function(){return fa.decode}});Object.defineProperty(A,"decodeMulti",{enumerable:!0,get:function(){return fa.decodeMulti}});var Yr=da();Object.defineProperty(A,"decodeAsync",{enumerable:!0,get:function(){return Yr.decodeAsync}});Object.defineProperty(A,"decodeArrayStream",{enumerable:!0,get:function(){return Yr.decodeArrayStream}});Object.defineProperty(A,"decodeMultiStream",{enumerable:!0,get:function(){return Yr.decodeMultiStream}});Object.defineProperty(A,"decodeStream",{enumerable:!0,get:function(){return Yr.decodeStream}});var ha=Gr();Object.defineProperty(A,"Decoder",{enumerable:!0,get:function(){return ha.Decoder}});Object.defineProperty(A,"DataViewIndexOutOfBoundsError",{enumerable:!0,get:function(){return ha.DataViewIndexOutOfBoundsError}});var nl=Hr();Object.defineProperty(A,"DecodeError",{enumerable:!0,get:function(){return nl.DecodeError}});var sl=Cn();Object.defineProperty(A,"Encoder",{enumerable:!0,get:function(){return sl.Encoder}});var al=Vr();Object.defineProperty(A,"ExtensionCodec",{enumerable:!0,get:function(){return al.ExtensionCodec}});var il=On();Object.defineProperty(A,"ExtData",{enumerable:!0,get:function(){return il.ExtData}});var _t=Nn();Object.defineProperty(A,"EXT_TIMESTAMP",{enumerable:!0,get:function(){return _t.EXT_TIMESTAMP}});Object.defineProperty(A,"encodeDateToTimeSpec",{enumerable:!0,get:function(){return _t.encodeDateToTimeSpec}});Object.defineProperty(A,"encodeTimeSpecToTimestamp",{enumerable:!0,get:function(){return _t.encodeTimeSpecToTimestamp}});Object.defineProperty(A,"decodeTimestampToTimeSpec",{enumerable:!0,get:function(){return _t.decodeTimestampToTimeSpec}});Object.defineProperty(A,"encodeTimestampExtension",{enumerable:!0,get:function(){return _t.encodeTimestampExtension}});Object.defineProperty(A,"decodeTimestampExtension",{enumerable:!0,get:function(){return _t.decodeTimestampExtension}})});var Qi=V((ip,Yi)=>{var Nt=require("fs"),Ki=require("url"),ed=require("child_process").spawn;Yi.exports=Is;Is.XMLHttpRequest=Is;function Is(e){"use strict";e=e||{};var r=this,t=require("http"),n=require("https"),s,a,i={},o=!1,d={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},l=Object.assign({},d),u=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],b=["TRACE","TRACK","CONNECT"],g=!1,f=!1,y=!1,v={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),this.status=null,this.statusText=null;var R=function(p){return o||p&&u.indexOf(p.toLowerCase())===-1},w=function(p){return p&&b.indexOf(p)===-1};this.open=function(p,h,k,U,_){if(this.abort(),f=!1,y=!1,!w(p))throw new Error("SecurityError: Request method not allowed");i={method:p,url:h.toString(),async:typeof k!="boolean"?!0:k,user:U||null,password:_||null},S(this.OPENED)},this.setDisableHeaderCheck=function(p){o=p},this.setRequestHeader=function(p,h){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(!R(p))return console.warn('Refused to set unsafe header "'+p+'"'),!1;if(g)throw new Error("INVALID_STATE_ERR: send flag is true");return l[p]=h,!0},this.getResponseHeader=function(p){return typeof p=="string"&&this.readyState>this.OPENED&&a.headers[p.toLowerCase()]&&!f?a.headers[p.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||f)return"";var p="";for(var h in a.headers)h!=="set-cookie"&&h!=="set-cookie2"&&(p+=h+": "+a.headers[h]+`\r
`);return p.substr(0,p.length-2)},this.getRequestHeader=function(p){return typeof p=="string"&&l[p]?l[p]:""},this.send=function(p){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(g)throw new Error("INVALID_STATE_ERR: send has already been called");var h=!1,k=!1,U=Ki.parse(i.url),_;switch(U.protocol){case"https:":h=!0;case"http:":_=U.hostname;break;case"file:":k=!0;break;case void 0:case"":_="localhost";break;default:throw new Error("Protocol not supported.")}if(k){if(i.method!=="GET")throw new Error("XMLHttpRequest: Only GET method is supported");if(i.async)Nt.readFile(unescape(U.pathname),function(te,Fe){te?r.handleError(te,te.errno||-1):(r.status=200,r.responseText=Fe.toString("utf8"),r.response=Fe,S(r.DONE))});else try{this.response=Nt.readFileSync(unescape(U.pathname)),this.responseText=this.response.toString("utf8"),this.status=200,S(r.DONE)}catch(te){this.handleError(te,te.errno||-1)}return}var I=U.port||(h?443:80),P=U.pathname+(U.search?U.search:"");if(l.Host=_,h&&I===443||I===80||(l.Host+=":"+U.port),i.user){typeof i.password>"u"&&(i.password="");var E=new Buffer(i.user+":"+i.password);l.Authorization="Basic "+E.toString("base64")}i.method==="GET"||i.method==="HEAD"?p=null:p?(l["Content-Length"]=Buffer.isBuffer(p)?p.length:Buffer.byteLength(p),l["Content-Type"]||(l["Content-Type"]="text/plain;charset=UTF-8")):i.method==="POST"&&(l["Content-Length"]=0);var D=e.agent||!1,$={host:_,port:I,path:P,method:i.method,headers:l,agent:D};if(h&&($.pfx=e.pfx,$.key=e.key,$.passphrase=e.passphrase,$.cert=e.cert,$.ca=e.ca,$.ciphers=e.ciphers,$.rejectUnauthorized=e.rejectUnauthorized!==!1),f=!1,i.async){var Wt=h?n.request:t.request;g=!0,r.dispatchEvent("readystatechange");var We=function(te){if(a=te,a.statusCode===302||a.statusCode===303||a.statusCode===307){i.url=a.headers.location;var Fe=Ki.parse(i.url);_=Fe.hostname;var ke={hostname:Fe.hostname,port:Fe.port,path:Fe.path,method:a.statusCode===303?"GET":i.method,headers:l};h&&(ke.pfx=e.pfx,ke.key=e.key,ke.passphrase=e.passphrase,ke.cert=e.cert,ke.ca=e.ca,ke.ciphers=e.ciphers,ke.rejectUnauthorized=e.rejectUnauthorized!==!1),s=Wt(ke,We).on("error",Ce),s.end();return}S(r.HEADERS_RECEIVED),r.status=a.statusCode,a.on("data",function(xr){if(xr){var io=Buffer.from(xr);r.response=Buffer.concat([r.response,io])}g&&S(r.LOADING)}),a.on("end",function(){g&&(g=!1,S(r.DONE),r.responseText=r.response.toString("utf8"))}),a.on("error",function(xr){r.handleError(xr)})},Ce=function(te){r.handleError(te)};s=Wt($,We).on("error",Ce),e.autoUnref&&s.on("socket",te=>{te.unref()}),p&&s.write(p),s.end(),r.dispatchEvent("loadstart")}else{var Ct=".node-xmlhttprequest-content-"+process.pid,Ft=".node-xmlhttprequest-sync-"+process.pid;Nt.writeFileSync(Ft,"","utf8");for(var no="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(h?"s":"")+".request;var options = "+JSON.stringify($)+";var responseText = '';var responseData = Buffer.alloc(0);var req = doRequest(options, function(response) {response.on('data', function(chunk) {  var data = Buffer.from(chunk);  responseText += data.toString('utf8');  responseData = Buffer.concat([responseData, data]);});response.on('end', function() {fs.writeFileSync('"+Ct+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText, data: responseData.toString('base64')}}), 'utf8');fs.unlinkSync('"+Ft+"');});response.on('error', function(error) {fs.writeFileSync('"+Ct+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+Ft+"');});}).on('error', function(error) {fs.writeFileSync('"+Ct+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+Ft+"');});"+(p?"req.write('"+JSON.stringify(p).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",so=ed(process.argv[0],["-e",no]),id;Nt.existsSync(Ft););if(r.responseText=Nt.readFileSync(Ct,"utf8"),so.stdin.end(),Nt.unlinkSync(Ct),r.responseText.match(/^NODE-XMLHTTPREQUEST-ERROR:/)){var ao=JSON.parse(r.responseText.replace(/^NODE-XMLHTTPREQUEST-ERROR:/,""));r.handleError(ao,503)}else{r.status=r.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:([0-9]*),.*/,"$1");var Rn=JSON.parse(r.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:[0-9]*,(.*)/,"$1"));a={statusCode:r.status,headers:Rn.data.headers},r.responseText=Rn.data.text,r.response=Buffer.from(Rn.data.data,"base64"),S(r.DONE,!0)}}},this.handleError=function(p,h){this.status=h||0,this.statusText=p,this.responseText=p.stack,f=!0,S(this.DONE)},this.abort=function(){s&&(s.abort(),s=null),l=Object.assign({},d),this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),f=y=!0,this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||g)&&this.readyState!==this.DONE&&(g=!1,S(this.DONE)),this.readyState=this.UNSENT},this.addEventListener=function(p,h){p in v||(v[p]=[]),v[p].push(h)},this.removeEventListener=function(p,h){p in v&&(v[p]=v[p].filter(function(k){return k!==h}))},this.dispatchEvent=function(p){if(typeof r["on"+p]=="function"&&(this.readyState===this.DONE&&i.async?setTimeout(function(){r["on"+p]()},0):r["on"+p]()),p in v)for(let h=0,k=v[p].length;h<k;h++)this.readyState===this.DONE?setTimeout(function(){v[p][h].call(r)},0):v[p][h].call(r)};var S=function(p){if(!(r.readyState===p||r.readyState===r.UNSENT&&y)&&(r.readyState=p,(i.async||r.readyState<r.OPENED||r.readyState===r.DONE)&&r.dispatchEvent("readystatechange"),r.readyState===r.DONE)){let h;y?h="abort":f?h="error":h="load",r.dispatchEvent(h),r.dispatchEvent("loadend")}}}});var Be=class extends Error{constructor(r){super(r),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}};var Te=class extends Be{};var z=typeof process<"u"&&process.release&&process.release.name==="node",Bt;if(globalThis.document)Bt=e=>new Promise((r,t)=>{let n=document.createElement("script");n.src=e,n.onload=()=>r(),n.onerror=t,document.head.appendChild(n)});else if(globalThis.importScripts)Bt=async e=>{try{globalThis.importScripts(e)}catch(r){if(r instanceof TypeError)await Promise.resolve().then(()=>Lt(require(e)));else throw r}};else if(z)Bt=async e=>{let r=(await Promise.resolve().then(()=>Lt(require("path")))).default;await Promise.resolve().then(()=>Lt(require(r.resolve(e))))};else throw new Be("Cannot determine runtime environment");var le={null:0,symbol:1,pairlist:2,closure:3,environment:4,promise:5,call:6,special:7,builtin:8,string:9,logical:10,integer:13,double:14,complex:15,character:16,dots:17,any:18,list:19,expression:20,bytecode:21,pointer:22,weakref:23,raw:24,s4:25,new:30,free:31,function:99};function zt(e){return!!e&&typeof e=="object"&&Object.keys(le).includes(e.type)}function ze(e){return!!e&&typeof e=="object"&&"re"in e&&"im"in e}var c={};function Fs(e){Object.keys(e).forEach(r=>c._free(e[r]))}function je(e){return c._Rf_protect(re(e)),e}function M(e,r){return c._Rf_protect(re(e)),++r.n,e}function Ls(e){let r=c._malloc(4);return c._R_ProtectWithIndex(re(e),r),{loc:c.getValue(r,"i32"),ptr:r}}function Bs(e){c._Rf_unprotect(1),c._free(e.ptr)}function zs(e,r){return c._R_Reprotect(re(e),r.loc),e}function C(e){c._Rf_unprotect(e)}function En(e,r,t){c._Rf_defineVar(re(r),re(t),re(e))}function be(e,r){let t={},n={n:0};try{let s=new ne(r);M(s,n),t.code=c.allocateUTF8(e);let a=c._R_ParseEvalString(t.code,s.ptr);return x.wrap(a)}finally{Fs(t),C(n.n)}}var ut=class extends Error{constructor(r,t){super(r),this.name="UnwindProtectException",this.cont=t}};function He(e,r){return c.getWasmTableEntry(c.GOT.ffi_safe_eval.value)(re(e),re(r))}var po=new WeakMap;function js(e,r){return po.set(e,r),e}function vn(e){return typeof e=="string"&&e.length===jt}var jt=63;function we(){let e=Array.from({length:4},go).join("-");if(e.length!==jt)throw new Error("comlink internal error: UUID has the wrong length");return e}function go(){let e=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16),r=15-e.length;return r>0&&(e=Array.from({length:r},()=>0).join("")+e),e}function re(e){return Xe(e)?e.ptr:e}function Ge(e,r){if(c._TYPEOF(e.ptr)!==le[r])throw new Error(`Unexpected object type "${e.type()}" when expecting type "${r}"`)}var Ae=new Map;function Ke(e,r){let t=re(r);if(c._R_PreserveObject(t),e!==void 0){if(vn(e)){Ae.get(e).push(t);return}throw new Error("Unexpected shelter type "+typeof e)}}function Sn(e,r){let t=re(r);c._R_ReleaseObject(t);let n=Ae.get(e),s=n.indexOf(t);if(s<0)throw new Error("Can't find object in shelter.");n.splice(s,1)}function kn(e){let r=Ae.get(e);for(let t of r)try{c._R_ReleaseObject(t)}catch(n){console.error(n)}Ae.set(e,[])}function Hs(e){if(zt(e))return new(qt(e.type))(e);if(typeof e>"u")return new ht;if(e&&typeof e=="object"&&"type"in e&&e.type==="null")return new ht;if(e===null)return new se({type:"logical",names:null,values:[null]});if(typeof e=="boolean")return new se(e);if(typeof e=="number")return new Je(e);if(typeof e=="string")return new ce(e);if(ze(e))return new pt(e);if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)return new gt(e);if(Array.isArray(e))return mo(e);if(typeof e=="object")return Ve.fromObject(e);throw new Error("R object construction for this JS object is not yet supported.")}function mo(e){let r={n:0};if(e.every(n=>n&&typeof n=="object"&&!Xe(n)&&!ze(n))){let n=e,s=n.every(i=>Object.keys(i).filter(o=>!Object.keys(n[0]).includes(o)).length===0&&Object.keys(n[0]).filter(o=>!Object.keys(i).includes(o)).length===0),a=n.every(i=>Object.values(i).every(o=>$s(o)||qs(o)));if(s&&a)return Ve.fromD3(n)}if(e.every(n=>typeof n=="boolean"||n===null))return new se(e);if(e.every(n=>typeof n=="number"||n===null))return new Je(e);if(e.every(n=>typeof n=="string"||n===null))return new ce(e);try{let n=new ue([new H("c"),...e]);return M(n,r),n.eval()}finally{C(r.n)}}var B=class{constructor(r){this.ptr=r}type(){let r=c._TYPEOF(this.ptr);return Object.keys(le).find(n=>le[n]===r)}},ft,Er,qe=class qe extends B{constructor(t){if(!(t instanceof B))return Hs(t);super(t.ptr);W(this,ft)}static wrap(t){let n=c._TYPEOF(t),s=Object.keys(le)[Object.values(le).indexOf(n)];return new(qt(s))(new B(t))}get[Symbol.toStringTag](){return`RObject:${this.type()}`}static getPersistentObject(t){return F[t]}getPropertyValue(t){return this[t]}inspect(){be(".Internal(inspect(x))",{x:this})}isNull(){return c._TYPEOF(this.ptr)===le.null}isNa(){try{let t=be("is.na(x)",{x:this});return je(t),t.toBoolean()}finally{C(1)}}isUnbound(){return this.ptr===F.unboundValue.ptr}attrs(){return $e.wrap(c._ATTRIB(this.ptr))}class(){let t={n:0},n=new ue([new H("class"),this]);M(n,t);try{return n.eval()}finally{C(t.n)}}setNames(t){let n;if(t===null)n=F.null;else if(Array.isArray(t)&&t.every(s=>typeof s=="string"||s===null))n=new ce(t);else throw new Error("Argument to setNames must be null or an Array of strings or null");return c._Rf_setAttrib(this.ptr,F.namesSymbol.ptr,n.ptr),this}names(){let t=ce.wrap(c._Rf_getAttrib(this.ptr,F.namesSymbol.ptr));return t.isNull()?null:t.toArray()}includes(t){let n=this.names();return n&&n.includes(t)}toJs(t={depth:0},n=1){throw new Error("This R object cannot be converted to JS")}subset(t){return Le(this,ft,Er).call(this,t,F.bracketSymbol.ptr)}get(t){return Le(this,ft,Er).call(this,t,F.bracket2Symbol.ptr)}getDollar(t){return Le(this,ft,Er).call(this,t,F.dollarSymbol.ptr)}pluck(...t){let n=Ls(F.null);try{let s=(i,o)=>{let d=i.get(o);return zs(d,n)},a=t.reduce(s,this);return a.isNull()?void 0:a}finally{Bs(n)}}set(t,n){let s={n:0};try{let a=new qe(t);M(a,s);let i=new qe(n);M(i,s);let o=new H("[[<-"),d=c._Rf_lang4(o.ptr,this.ptr,a.ptr,i.ptr);return M(d,s),qe.wrap(He(d,F.baseEnv))}finally{C(s.n)}}static getMethods(t){let n=new Set,s=t;do Object.getOwnPropertyNames(s).map(a=>n.add(a));while(s=Object.getPrototypeOf(s));return[...n.keys()].filter(a=>typeof t[a]=="function")}};ft=new WeakSet,Er=function(t,n){let s={n:0};try{let a=new qe(t);M(a,s);let i=c._Rf_lang3(n,this.ptr,a.ptr);return M(i,s),qe.wrap(He(i,F.baseEnv))}finally{C(s.n)}};var x=qe,ht=class extends x{constructor(){return super(new B(c.getValue(c._R_NilValue,"*"))),this}toJs(){return{type:"null"}}},H=class extends x{constructor(r){if(r instanceof B){Ge(r,"symbol"),super(r);return}let t=c.allocateUTF8(r);try{super(new B(c._Rf_install(t)))}finally{c._free(t)}}toJs(){let r=this.toObject();return{type:"symbol",printname:r.printname,symvalue:r.symvalue,internal:r.internal}}toObject(){return{printname:this.printname().isUnbound()?null:this.printname().toString(),symvalue:this.symvalue().isUnbound()?null:this.symvalue().ptr,internal:this.internal().isNull()?null:this.internal().ptr}}toString(){return this.printname().toString()}printname(){return Ze.wrap(c._PRINTNAME(this.ptr))}symvalue(){return x.wrap(c._SYMVALUE(this.ptr))}internal(){return x.wrap(c._INTERNAL(this.ptr))}},$e=class e extends x{constructor(r){if(r instanceof B)return Ge(r,"pairlist"),super(r),this;let t={n:0};try{let{names:n,values:s}=mt(r),a=e.wrap(c._Rf_allocList(s.length));M(a,t);for(let[i,o]=[0,a];!o.isNull();[i,o]=[i+1,o.cdr()])o.setcar(new x(s[i]));a.setNames(n),super(a)}finally{C(t.n)}}get length(){return this.toArray().length}toArray(r={depth:1}){return this.toJs(r).values}toObject({allowDuplicateKey:r=!0,allowEmptyKey:t=!1,depth:n=-1}={}){let s=this.entries({depth:n}),a=s.map(([i])=>i);if(!r&&new Set(a).size!==a.length)throw new Error("Duplicate key when converting pairlist without allowDuplicateKey enabled");if(!t&&a.some(i=>!i))throw new Error("Empty or null key when converting pairlist without allowEmptyKey enabled");return Object.fromEntries(s.filter((i,o)=>s.findIndex(d=>d[0]===i[0])===o))}entries(r={depth:1}){let t=this.toJs(r);return t.values.map((n,s)=>[t.names?t.names[s]:null,n])}toJs(r={depth:0},t=1){let n=[],s=!1,a=[];for(let o=this;!o.isNull();o=o.cdr()){let d=o.tag();d.isNull()?n.push(""):(s=!0,n.push(d.toString())),r.depth&&t>=r.depth?a.push(o.car()):a.push(o.car().toJs(r,t+1))}return{type:"pairlist",names:s?n:null,values:a}}includes(r){return r in this.toObject()}setcar(r){c._SETCAR(this.ptr,r.ptr)}car(){return x.wrap(c._CAR(this.ptr))}cdr(){return x.wrap(c._CDR(this.ptr))}tag(){return x.wrap(c._TAG(this.ptr))}},ue=class e extends x{constructor(r){if(r instanceof B)return Ge(r,"call"),super(r),this;let t={n:0};try{let{values:n}=mt(r),s=n.map(i=>M(new x(i),t)),a=e.wrap(c._Rf_allocVector(le.call,n.length));M(a,t);for(let[i,o]=[0,a];!o.isNull();[i,o]=[i+1,o.cdr()])o.setcar(s[i]);super(a)}finally{C(t.n)}}setcar(r){c._SETCAR(this.ptr,r.ptr)}car(){return x.wrap(c._CAR(this.ptr))}cdr(){return x.wrap(c._CDR(this.ptr))}eval(){return c.webr.evalR(this,{env:F.baseEnv})}capture(r={}){return c.webr.captureR(this,r)}deparse(){let r={n:0};try{let t=c._Rf_lang2(new H("deparse1").ptr,c._Rf_lang2(new H("quote").ptr,this.ptr));M(t,r);let n=ce.wrap(He(t,F.baseEnv));return M(n,r),n.toString()}finally{C(r.n)}}},de=class e extends x{constructor(r,t=null){if(r instanceof B){if(Ge(r,"list"),super(r),t){if(t.length!==this.length)throw new Error("Can't construct named `RList`. Supplied `names` must be the same length as the list.");this.setNames(t)}return this}let n={n:0};try{let s=mt(r),a=c._Rf_allocVector(le.list,s.values.length);M(a,n),s.values.forEach((o,d)=>{Vs(o)?c._SET_VECTOR_ELT(a,d,new e(o).ptr):c._SET_VECTOR_ELT(a,d,new x(o).ptr)});let i=t||s.names;if(i&&i.length!==s.values.length)throw new Error("Can't construct named `RList`. Supplied `names` must be the same length as the list.");x.wrap(a).setNames(i),super(new B(a))}finally{C(n.n)}}get length(){return c._LENGTH(this.ptr)}isDataFrame(){let r=$e.wrap(c._ATTRIB(this.ptr)).get("class");return!r.isNull()&&r.toArray().includes("data.frame")}toArray(r={depth:1}){return this.toJs(r).values}toObject({allowDuplicateKey:r=!0,allowEmptyKey:t=!1,depth:n=-1}={}){let s=this.entries({depth:n}),a=s.map(([i])=>i);if(!r&&new Set(a).size!==a.length)throw new Error("Duplicate key when converting list without allowDuplicateKey enabled");if(!t&&a.some(i=>!i))throw new Error("Empty or null key when converting list without allowEmptyKey enabled");return Object.fromEntries(s.filter((i,o)=>s.findIndex(d=>d[0]===i[0])===o))}toD3(){if(!this.isDataFrame())throw new Error("Can't convert R list object to D3 format. Object must be of class 'data.frame'.");return this.entries().reduce((t,n)=>(n[1].forEach((s,a)=>t[a]=Object.assign(t[a]||{},{[n[0]]:s})),t),[])}entries(r={depth:-1}){let t=this.toJs(r);return this.isDataFrame()&&r.depth<0&&(t.values=t.values.map(n=>n.toArray())),t.values.map((n,s)=>[t.names?t.names[s]:null,n])}toJs(r={depth:0},t=1){return{type:"list",names:this.names(),values:[...Array(this.length).keys()].map(n=>r.depth&&t>=r.depth?this.get(n+1):this.get(n+1).toJs(r,t+1))}}},Ve=class e extends de{constructor(r){if(r instanceof B){if(super(r),!this.isDataFrame())throw new Error("Can't construct `RDataFrame`. Supplied R object is not a `data.frame`.");return this}return e.fromObject(r)}static fromObject(r){let{names:t,values:n}=mt(r),s={n:0};try{let a=!!t&&t.length>0&&t.every(o=>o),i=n.length>0&&n.every(o=>Array.isArray(o)||ArrayBuffer.isView(o)||o instanceof ArrayBuffer);if(a&&i){let o=n,d=o.every(u=>u.length===o[0].length),l=o.every(u=>$s(u[0])||qs(u[0]));if(d&&l){let u=new de({type:"list",names:t,values:o.map(g=>Hs(g))});M(u,s);let b=new ue([new H("as.data.frame"),u]);return M(b,s),new e(b.eval())}}}finally{C(s.n)}throw new Error("Can't construct `data.frame`. Source object is not eligible.")}static fromD3(r){return this.fromObject(Object.fromEntries(Object.keys(r[0]).map(t=>[t,r.map(n=>n[t])])))}},dt=class extends x{exec(...r){let t={n:0};try{let n=new ue([this,...r]);return M(n,t),n.eval()}finally{C(t.n)}}capture(r={},...t){let n={n:0};try{let s=new ue([this,...t]);return M(s,n),s.capture(r)}finally{C(n.n)}}},vr=class vr extends x{constructor(r){if(r instanceof B){Ge(r,"string"),super(r);return}let t=c.allocateUTF8(r);try{super(new B(c._Rf_mkCharCE(t,vr.CEType.CE_UTF8)))}finally{c._free(t)}}toString(){let r=c._vmaxget();try{return c.UTF8ToString(c._Rf_translateCharUTF8(this.ptr))}finally{c._vmaxset(r)}}toJs(){return{type:"string",value:this.toString()}}};vr.CEType={CE_NATIVE:0,CE_UTF8:1,CE_LATIN1:2,CE_BYTES:3,CE_SYMBOL:5,CE_ANY:99};var Ze=vr,ne=class extends x{constructor(r={}){if(r instanceof B)return Ge(r,"environment"),super(r),this;let t=0;try{let{names:n,values:s}=mt(r),a=je(c._R_NewEnv(F.globalEnv.ptr,0,0));++t,s.forEach((i,o)=>{let d=n?n[o]:null;if(!d)throw new Error("Can't create object in new environment with empty symbol name");let l=new H(d),u=je(new x(i));try{En(a,l,u)}finally{C(1)}}),super(new B(a))}finally{C(t)}}ls(r=!1,t=!0){return ce.wrap(c._R_lsInternal3(this.ptr,Number(r),Number(t))).toArray()}bind(r,t){let n=new H(r),s=je(new x(t));try{En(this,n,s)}finally{C(1)}}names(){return this.ls(!0,!0)}frame(){return x.wrap(c._FRAME(this.ptr))}subset(r){if(typeof r=="number")throw new Error("Object of type environment is not subsettable");return this.getDollar(r)}toObject({depth:r=-1}={}){let t=this.names();return Object.fromEntries([...Array(t.length).keys()].map(n=>{let s=this.getDollar(t[n]);return[t[n],r<0?s:s.toJs({depth:r})]}))}toJs(r={depth:0},t=1){let n=this.names(),s=[...Array(n.length).keys()].map(a=>r.depth&&t>=r.depth?this.getDollar(n[a]):this.getDollar(n[a]).toJs(r,t+1));return{type:"environment",names:n,values:s}}},De=class extends x{constructor(r,t,n){if(r instanceof B)return Ge(r,t),super(r),this;let s={n:0};try{let{names:a,values:i}=mt(r),o=c._Rf_allocVector(le[t],i.length);M(o,s),i.forEach(n(o)),x.wrap(o).setNames(a),super(new B(o))}finally{C(s.n)}}get length(){return c._LENGTH(this.ptr)}get(r){return super.get(r)}subset(r){return super.subset(r)}getDollar(){throw new Error("$ operator is invalid for atomic vectors")}detectMissing(){let r={n:0};try{let t=c._Rf_lang2(new H("is.na").ptr,this.ptr);M(t,r);let n=se.wrap(He(t,F.baseEnv));M(n,r);let s=n.toTypedArray();return Array.from(s).map(a=>!!a)}finally{C(r.n)}}toArray(){let r=this.toTypedArray();return this.detectMissing().map((t,n)=>t?null:r[n])}toObject({allowDuplicateKey:r=!0,allowEmptyKey:t=!1}={}){let n=this.entries(),s=n.map(([a])=>a);if(!r&&new Set(s).size!==s.length)throw new Error("Duplicate key when converting atomic vector without allowDuplicateKey enabled");if(!t&&s.some(a=>!a))throw new Error("Empty or null key when converting atomic vector without allowEmptyKey enabled");return Object.fromEntries(n.filter((a,i)=>n.findIndex(o=>o[0]===a[0])===i))}entries(){let r=this.toArray(),t=this.names();return r.map((n,s)=>[t?t[s]:null,n])}toJs(){return{type:this.type(),names:this.names(),values:this.toArray()}}},Sr,kr=class kr extends De{constructor(r){super(r,"logical",T(kr,Sr))}getBoolean(r){return this.get(r).toArray()[0]}toBoolean(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getBoolean(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS boolean");return r}toTypedArray(){return new Int32Array(c.HEAP32.subarray(c._LOGICAL(this.ptr)/4,c._LOGICAL(this.ptr)/4+this.length))}toArray(){let r=this.toTypedArray();return this.detectMissing().map((t,n)=>t?null:!!r[n])}};Sr=new WeakMap,W(kr,Sr,r=>{let t=c._LOGICAL(r),n=c.getValue(c._R_NaInt,"i32");return(s,a)=>{c.setValue(t+4*a,s===null?n:!!s,"i32")}});var se=kr,Tr,Ar=class Ar extends De{constructor(r){super(r,"integer",T(Ar,Tr))}getNumber(r){return this.get(r).toArray()[0]}toNumber(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getNumber(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS number");return r}toTypedArray(){return new Int32Array(c.HEAP32.subarray(c._INTEGER(this.ptr)/4,c._INTEGER(this.ptr)/4+this.length))}};Tr=new WeakMap,W(Ar,Tr,r=>{let t=c._INTEGER(r),n=c.getValue(c._R_NaInt,"i32");return(s,a)=>{c.setValue(t+4*a,s===null?n:Math.round(Number(s)),"i32")}});var Ht=Ar,Dr,Pr=class Pr extends De{constructor(r){super(r,"double",T(Pr,Dr))}getNumber(r){return this.get(r).toArray()[0]}toNumber(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getNumber(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS number");return r}toTypedArray(){return new Float64Array(c.HEAPF64.subarray(c._REAL(this.ptr)/8,c._REAL(this.ptr)/8+this.length))}};Dr=new WeakMap,W(Pr,Dr,r=>{let t=c._REAL(r),n=c.getValue(c._R_NaReal,"double");return(s,a)=>{c.setValue(t+8*a,s===null?n:s,"double")}});var Je=Pr,Mr,Or=class Or extends De{constructor(r){super(r,"complex",T(Or,Mr))}getComplex(r){return this.get(r).toArray()[0]}toComplex(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getComplex(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS object");return r}toTypedArray(){return new Float64Array(c.HEAPF64.subarray(c._COMPLEX(this.ptr)/8,c._COMPLEX(this.ptr)/8+2*this.length))}toArray(){let r=this.toTypedArray();return this.detectMissing().map((t,n)=>t?null:{re:r[2*n],im:r[2*n+1]})}};Mr=new WeakMap,W(Or,Mr,r=>{let t=c._COMPLEX(r),n=c.getValue(c._R_NaReal,"double");return(s,a)=>{c.setValue(t+8*(2*a),s===null?n:s.re,"double"),c.setValue(t+8*(2*a+1),s===null?n:s.im,"double")}});var pt=Or,Ir,Nr=class Nr extends De{constructor(r){super(r,"character",T(Nr,Ir))}getString(r){return this.get(r).toArray()[0]}toString(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getString(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS string");return r}toTypedArray(){return new Uint32Array(c.HEAPU32.subarray(c._STRING_PTR(this.ptr)/4,c._STRING_PTR(this.ptr)/4+this.length))}toArray(){let r=c._vmaxget();try{return this.detectMissing().map((t,n)=>t?null:c.UTF8ToString(c._Rf_translateCharUTF8(c._STRING_ELT(this.ptr,n))))}finally{c._vmaxset(r)}}};Ir=new WeakMap,W(Nr,Ir,r=>(t,n)=>{t===null?c._SET_STRING_ELT(r,n,F.naString.ptr):c._SET_STRING_ELT(r,n,new Ze(t).ptr)});var ce=Nr,Ur,Wr=class Wr extends De{constructor(r){r instanceof ArrayBuffer&&(r=new Uint8Array(r)),super(r,"raw",T(Wr,Ur))}getNumber(r){return this.get(r).toArray()[0]}toNumber(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getNumber(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS number");return r}toTypedArray(){return new Uint8Array(c.HEAPU8.subarray(c._RAW(this.ptr),c._RAW(this.ptr)+this.length))}};Ur=new WeakMap,W(Wr,Ur,r=>{let t=c._RAW(r);return(n,s)=>{c.setValue(t+s,Number(n),"i8")}});var gt=Wr;function mt(e){return zt(e)?e:Array.isArray(e)||ArrayBuffer.isView(e)?{names:null,values:e}:e&&typeof e=="object"&&!ze(e)?{names:Object.keys(e),values:Object.values(e)}:{names:null,values:[e]}}function qt(e){let r={object:x,null:ht,symbol:H,pairlist:$e,closure:dt,environment:ne,call:ue,special:dt,builtin:dt,string:Ze,logical:se,integer:Ht,double:Je,complex:pt,character:ce,list:de,raw:gt,function:dt,dataframe:Ve};return e in r?r[e]:x}function Xe(e){return e instanceof x}function qs(e){let r=["logical","integer","double","complex","character"];return Xe(e)&&r.includes(e.type())||Xe(e)&&e.isNa()}function $s(e){return e===null||typeof e=="number"||typeof e=="boolean"||typeof e=="string"||ze(e)}var F;function Tn(){F={baseEnv:ne.wrap(c.getValue(c._R_BaseEnv,"*")),bracket2Symbol:H.wrap(c.getValue(c._R_Bracket2Symbol,"*")),bracketSymbol:H.wrap(c.getValue(c._R_BracketSymbol,"*")),dollarSymbol:H.wrap(c.getValue(c._R_DollarSymbol,"*")),emptyEnv:ne.wrap(c.getValue(c._R_EmptyEnv,"*")),false:se.wrap(c.getValue(c._R_FalseValue,"*")),globalEnv:ne.wrap(c.getValue(c._R_GlobalEnv,"*")),na:se.wrap(c.getValue(c._R_LogicalNAValue,"*")),namesSymbol:H.wrap(c.getValue(c._R_NamesSymbol,"*")),naString:x.wrap(c.getValue(c._R_NaString,"*")),null:ht.wrap(c.getValue(c._R_NilValue,"*")),true:se.wrap(c.getValue(c._R_TrueValue,"*")),unboundValue:x.wrap(c.getValue(c._R_UnboundValue,"*"))}}function Cr(){let e={resolve:(()=>{}),reject:(()=>{}),promise:Promise.resolve()},r=new Promise((t,n)=>{e.resolve=t,e.reject=n});return e.promise=r,e}function Ye(e,r,t,...n){return e==null||yo(e)?e:e instanceof ArrayBuffer?new Uint8Array(e):r(e)?t(e,...n):Array.isArray(e)||ArrayBuffer.isView(e)?e.map(s=>Ye(s,r,t,...n)):e instanceof B?e:typeof e=="object"?Object.fromEntries(Object.entries(e).map(([s,a])=>[s,Ye(a,r,t,...n)])):e}function yo(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap}function Fr(e){let r="Reached the unreachable";throw r=r+(e?": "+e:"."),new Be(r)}function Vs(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&!ArrayBuffer.isView(e)&&!ze(e)&&!zt(e)&&!(e instanceof Date)&&!(e instanceof RegExp)&&!(e instanceof Error)&&!(e instanceof B)&&Object.getPrototypeOf(e)===Object.prototype}var xf=new TextEncoder;function Jn(e,r){return ma({type:"request",data:{uuid:we(),msg:e}},r)}function Xn(e,r,t){return ma({type:"response",data:{uuid:e,resp:r}},t)}function ma(e,r){return r&&js(e,r),e}function ya(e,r){return{type:"sync-request",data:{msg:e,reqData:r}}}function ol(e){return!!e&&typeof e=="object"&&"payloadType"in e&&"obj"in e}function Gt(e){return ol(e)&&e.payloadType==="ptr"}var wa=Lt(pa());var cl=new TextDecoder("utf-8"),bt,wt,Kt,Yt,Rt,en=class{constructor(r,t,n=[]){W(this,bt,!1);W(this,wt);W(this,Kt);W(this,Yt);W(this,Rt);this.syncifier=new Gn;this.endpoint=r,this.msg=t,this.transfers=n,j(this,wt,!1)}scheduleSync(){if(!T(this,bt))return j(this,bt,!0),this.syncifier.scheduleTask(this),j(this,Rt,this.doSync()),T(this,Rt).next(),this}poll(){if(!T(this,bt))throw new Error("Task not synchronously scheduled");let{done:r,value:t}=T(this,Rt).next();return r?(j(this,wt,!0),j(this,Kt,t),!0):!1}*doSync(){let{endpoint:r,msg:t,transfers:n}=this,s=new Int32Array(new SharedArrayBuffer(8)),a=this.signalBuffer,i=this.taskId,o=ba(jt),d=ya(t,{sizeBuffer:s,dataBuffer:o,signalBuffer:a,taskId:i});if(r.postMessage(d,n),yield,Atomics.load(s,1)===0){let u=cl.decode(o.slice(0,jt));ul(o);let b=Atomics.load(s,0);o=ba(b),r.postMessage({id:u,dataBuffer:o}),yield}let l=Atomics.load(s,0);return(0,wa.decode)(o.slice(0,l))}get result(){if(T(this,Yt))throw T(this,Yt);if(T(this,wt))return T(this,Kt);throw new Error("Not ready.")}syncify(){return this.scheduleSync(),this.syncifier.syncifyTask(this),this.result}};bt=new WeakMap,wt=new WeakMap,Kt=new WeakMap,Yt=new WeakMap,Rt=new WeakMap;var Gn=class{constructor(){this.nextTaskId=new Int32Array([1]),this.signalBuffer=new Int32Array(new SharedArrayBuffer(132)),this.tasks=new Map}scheduleTask(r){r.taskId=this.nextTaskId[0],this.nextTaskId[0]+=2,r.signalBuffer=this.signalBuffer,this.tasks.set(r.taskId,r)}waitOnSignalBuffer(){for(;;)switch(Atomics.wait(this.signalBuffer,0,0,50)){case"ok":case"not-equal":return;case"timed-out":Kn[0]!==0&&Ra();break;default:throw new Error("Unreachable")}}*tasksIdsToWakeup(){let r=Atomics.load(this.signalBuffer,0);for(let t=0;t<32;t++){let n=1<<t;r&n&&(Atomics.and(this.signalBuffer,0,~n),yield Atomics.exchange(this.signalBuffer,t+1,0))}}pollTasks(r){let t=!1;for(let n of this.tasksIdsToWakeup()){let s=this.tasks.get(n);if(!s)throw new Error(`Assertion error: unknown taskId ${n}.`);s.poll()&&(this.tasks.delete(n),s===r&&(t=!0))}return t}syncifyTask(r){for(;;)if(this.waitOnSignalBuffer(),this.pollTasks(r))return}},Qr=[];function ba(e){let r=Math.ceil(Math.log2(e));Qr[r]||(Qr[r]=[]);let t=Qr[r].pop();return t?(t.fill(0),t):new Uint8Array(new SharedArrayBuffer(2**r))}function ul(e){let r=Math.ceil(Math.log2(e.byteLength));Qr[r].push(e)}var Kn=new Int32Array(new ArrayBuffer(4)),Ra=()=>{throw Kn[0]=0,new Error("No event handler.")};function xa(e){Ra=e}function Ea(e){Kn=new Int32Array(e)}var tn=class{static proxy(r){var t;return t=class extends EventTarget{constructor(a,i){super();this.CONNECTING=t.CONNECTING;this.OPEN=t.OPEN;this.CLOSING=t.CLOSING;this.CLOSED=t.CLOSED;this.readyState=t.CONNECTING;this.bufferedAmount=0;this.extensions="";this.url=String(a),this.protocol=Array.isArray(i)?i[0]:i||"",this.binaryType="arraybuffer",this.onopen=null,this.onmessage=null,this.onclose=null,this.onerror=null,this.uuid=we(),r.writeSystem({type:"proxyWebSocket",data:{uuid:this.uuid,url:this.url,protocol:this.protocol}}),r.ws.set(this.uuid,this)}send(a){r.writeSystem({type:"sendWebSocket",data:{uuid:this.uuid,data:a}})}close(a,i){r.writeSystem({type:"closeWebSocket",data:{uuid:this.uuid,code:a,reason:i}})}_accept(){var i;if(this.readyState!==0)return;this.readyState=1;let a=new Event("open");this.dispatchEvent(a),(i=this.onopen)==null||i.call(this,a)}_recieve(a){var o;let i=new MessageEvent("message",{data:a});this.dispatchEvent(i),(o=this.onmessage)==null||o.call(this,i)}_close(a,i){var d;let o=new CloseEvent("close",{code:a,reason:i});this.dispatchEvent(o),(d=this.onclose)==null||d.call(this,o),r.ws.delete(this.uuid)}_error(){var i;let a=new Event("error");this.dispatchEvent(a),(i=this.onerror)==null||i.call(this,a)}},t.CONNECTING=0,t.OPEN=1,t.CLOSING=2,t.CLOSED=3,t}};z&&(globalThis.CloseEvent=class extends Event{constructor(r,t={}){super(r,t),this.wasClean=t.wasClean||!1,this.code=t.code||0,this.reason=t.reason||""}});var rn=class{static proxy(r){return class extends EventTarget{constructor(n,s={}){super(),this.url=String(n),this.options=s,this.onmessage=null,this.onmessageerror=null,this.onerror=null,this.uuid=we(),r.writeSystem({type:"proxyWorker",data:{uuid:this.uuid,url:this.url,options:this.options}}),r.workers.set(this.uuid,this)}postMessage(n,s={async:!0}){var d,l;let a=Array.isArray(s)?!0:(d=s.async)!=null?d:!0,i=Array.isArray(s)?s:(l=s.transfer)!=null?l:[];return r.syncRequest({type:"post-message-worker",data:{uuid:this.uuid,data:n,async:a,transfer:i}}).data}terminate(){r.writeSystem({type:"terminateWorker",data:{uuid:this.uuid}})}_message(n){var a;let s=new MessageEvent("message",{data:n});this.dispatchEvent(s),(a=this.onmessage)==null||a.call(this,s)}_messageerror(n){var a;let s=new MessageEvent("message",{data:n});this.dispatchEvent(s),(a=this.onmessageerror)==null||a.call(this,s)}_error(){var s;let n=new Event("error");this.dispatchEvent(n),(s=this.onerror)==null||s.call(this,n)}}}};z&&(globalThis.Worker=require("worker_threads").Worker);var et,Qt,tt,er,nn=class{constructor(){W(this,et);W(this,Qt,()=>0);W(this,tt,new Int32Array(new SharedArrayBuffer(4)));W(this,er,()=>{});this.resolveRequest=()=>{};j(this,et,z?require("worker_threads").parentPort:globalThis),Ea(T(this,tt).buffer),xa(()=>this.handleEvents()),this.WebSocketProxy=tn.proxy(this),this.ws=new Map,this.WorkerProxy=rn.proxy(this),this.workers=new Map}resolve(){this.write({type:"resolve",data:T(this,tt).buffer})}write(r,t){T(this,et).postMessage(r,t)}writeSystem(r,t){T(this,et).postMessage({type:"system",data:r},t)}syncRequest(r,t){return new en(T(this,et),r,t).syncify()}read(){return this.syncRequest({type:"read"})}inputOrDispatch(){for(;;){let r=this.read();if(r.type==="stdin")return c.allocateUTF8(r.data);T(this,Qt).call(this,r)}}run(r){try{c.callMain(r)}catch(t){throw t instanceof WebAssembly.RuntimeError&&(this.writeSystem({type:"console.error",data:t.message}),this.writeSystem({type:"console.error",data:"An unrecoverable WebAssembly error has occurred, the webR worker will be closed."}),this.writeSystem({type:"close"})),t}}handleEvents(){var r,t,n,s,a,i,o;if(T(this,tt)[0]!==0){for(;;){let d=this.syncRequest({type:"event"});if(!d)break;switch(d.data.msg.type){case"interrupt":T(this,er).call(this);break;case"websocket-open":{let l=d.data.msg;(r=this.ws.get(l.data.uuid))==null||r._accept();break}case"websocket-message":{let l=d.data.msg;(t=this.ws.get(l.data.uuid))==null||t._recieve(l.data.data);break}case"websocket-close":{let l=d.data.msg;(n=this.ws.get(l.data.uuid))==null||n._close(l.data.code,l.data.reason);break}case"websocket-error":{let l=d.data.msg;(s=this.ws.get(l.data.uuid))==null||s._error();break}case"worker-message":{let l=d.data.msg;(a=this.workers.get(l.data.uuid))==null||a._message(l.data.data);break}case"worker-messageerror":{let l=d.data.msg;(i=this.workers.get(l.data.uuid))==null||i._messageerror(l.data.data);break}case"worker-error":{let l=d.data.msg;(o=this.workers.get(l.data.uuid))==null||o._error();break}default:throw new Error(`Unsupported event type '${d.data.msg.type}'.`)}}T(this,tt)[0]=0}}setInterrupt(r){j(this,er,r)}setDispatchHandler(r){j(this,Qt,r)}};et=new WeakMap,Qt=new WeakMap,tt=new WeakMap,er=new WeakMap;z&&(globalThis.Worker=require("worker_threads").Worker);var Et,vt,tr,rt,an,sn=class{constructor(){W(this,Et);W(this,vt,new Map);W(this,tr,()=>0);W(this,rt,0);this.WebSocketProxy=z?void 0:WebSocket;this.WorkerProxy=z?void 0:Worker;W(this,an,async()=>{for(;;)try{j(this,rt,0);let r=await this.request({type:"read"});if(r.type==="stdin"){let t=Module.allocateUTF8(r.data);Module._strcpy(Module._DLLbuf,t),Module.setValue(Module._DLLbufp,Module._DLLbuf,"*"),Module._free(t);try{for(;Module._R_ReplDLLdo1()>0;);}catch(n){if(n instanceof WebAssembly.Exception)Module._R_ReplDLLinit(),Module._R_ReplDLLdo1();else throw n}}else T(this,tr).call(this,r)}catch(r){if(r instanceof WebAssembly.RuntimeError&&(this.writeSystem({type:"console.error",data:r.message}),this.writeSystem({type:"console.error",data:"An unrecoverable WebAssembly error has occurred, the webR worker will be closed."}),this.writeSystem({type:"close"})),!(r instanceof WebAssembly.Exception))throw r}});j(this,Et,z?require("worker_threads").parentPort:globalThis)}resolve(){this.write({type:"resolve"})}write(r,t){T(this,Et).postMessage(r,t)}writeSystem(r,t){T(this,Et).postMessage({type:"system",data:r},t)}read(){throw new Te("Unable to synchronously read when using the `PostMessage` channel.")}inputOrDispatch(){if(T(this,rt)>0){j(this,rt,0);let r=Module.allocateUTF8OnStack("Can't block for input when using the PostMessage communication channel.");Module._Rf_error(r)}return Cs(this,rt)._++,0}run(r){let t=r||[];t.unshift("R");let n=t.length,s=Module._malloc(4*(n+1));t.forEach((a,i)=>{let o=s+4*i,d=Module.allocateUTF8(a);Module.setValue(o,d,"*")}),this.writeSystem({type:"console.warn",data:"WebR is using `PostMessage` communication channel, nested R REPLs are not available."}),Module._Rf_initialize_R(n,s),Module._setup_Rmainloop(),Module._R_ReplDLLinit(),Module._R_ReplDLLdo1(),T(this,an).call(this)}setDispatchHandler(r){j(this,tr,r)}async request(r,t){let n=Jn(r,t),{resolve:s,promise:a}=Cr();return T(this,vt).set(n.data.uuid,s),this.write(n,t),a}syncRequest(){throw new Error("Unable to sync-request when using the `PostMessage` channel.")}setInterrupt(){}handleEvents(){}resolveRequest(r){let t=r,n=t.data.uuid,s=T(this,vt).get(n);s?(T(this,vt).delete(n),s(t.data.resp)):console.warn("Can't find request.")}};Et=new WeakMap,vt=new WeakMap,tr=new WeakMap,rt=new WeakMap,an=new WeakMap;var xt={Automatic:0,SharedArrayBuffer:1,PostMessage:3};function Sa(e){switch(e.data.channelType){case xt.SharedArrayBuffer:return new nn;case xt.PostMessage:return new sn;default:throw new Te("Unknown worker channel type received")}}function Pt(e){let r=e.length;for(;--r>=0;)e[r]=0}var hl=0,ui=1,pl=2,gl=3,ml=258,Rs=29,mr=256,lr=mr+1+Rs,Tt=30,xs=19,di=2*lr+1,nt=15,Yn=16,yl=7,Es=256,fi=16,hi=17,pi=18,fs=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),fn=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),_l=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),gi=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),bl=512,ve=new Array((lr+2)*2);Pt(ve);var ar=new Array(Tt*2);Pt(ar);var cr=new Array(bl);Pt(cr);var ur=new Array(ml-gl+1);Pt(ur);var vs=new Array(Rs);Pt(vs);var hn=new Array(Tt);Pt(hn);function Qn(e,r,t,n,s){this.static_tree=e,this.extra_bits=r,this.extra_base=t,this.elems=n,this.max_length=s,this.has_stree=e&&e.length}var mi,yi,_i;function es(e,r){this.dyn_tree=e,this.max_code=0,this.stat_desc=r}var bi=e=>e<256?cr[e]:cr[256+(e>>>7)],dr=(e,r)=>{e.pending_buf[e.pending++]=r&255,e.pending_buf[e.pending++]=r>>>8&255},K=(e,r,t)=>{e.bi_valid>Yn-t?(e.bi_buf|=r<<e.bi_valid&65535,dr(e,e.bi_buf),e.bi_buf=r>>Yn-e.bi_valid,e.bi_valid+=t-Yn):(e.bi_buf|=r<<e.bi_valid&65535,e.bi_valid+=t)},me=(e,r,t)=>{K(e,t[r*2],t[r*2+1])},wi=(e,r)=>{let t=0;do t|=e&1,e>>>=1,t<<=1;while(--r>0);return t>>>1},wl=e=>{e.bi_valid===16?(dr(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},Rl=(e,r)=>{let t=r.dyn_tree,n=r.max_code,s=r.stat_desc.static_tree,a=r.stat_desc.has_stree,i=r.stat_desc.extra_bits,o=r.stat_desc.extra_base,d=r.stat_desc.max_length,l,u,b,g,f,y,v=0;for(g=0;g<=nt;g++)e.bl_count[g]=0;for(t[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<di;l++)u=e.heap[l],g=t[t[u*2+1]*2+1]+1,g>d&&(g=d,v++),t[u*2+1]=g,!(u>n)&&(e.bl_count[g]++,f=0,u>=o&&(f=i[u-o]),y=t[u*2],e.opt_len+=y*(g+f),a&&(e.static_len+=y*(s[u*2+1]+f)));if(v!==0){do{for(g=d-1;e.bl_count[g]===0;)g--;e.bl_count[g]--,e.bl_count[g+1]+=2,e.bl_count[d]--,v-=2}while(v>0);for(g=d;g!==0;g--)for(u=e.bl_count[g];u!==0;)b=e.heap[--l],!(b>n)&&(t[b*2+1]!==g&&(e.opt_len+=(g-t[b*2+1])*t[b*2],t[b*2+1]=g),u--)}},Ri=(e,r,t)=>{let n=new Array(nt+1),s=0,a,i;for(a=1;a<=nt;a++)s=s+t[a-1]<<1,n[a]=s;for(i=0;i<=r;i++){let o=e[i*2+1];o!==0&&(e[i*2]=wi(n[o]++,o))}},xl=()=>{let e,r,t,n,s,a=new Array(nt+1);for(t=0,n=0;n<Rs-1;n++)for(vs[n]=t,e=0;e<1<<fs[n];e++)ur[t++]=n;for(ur[t-1]=n,s=0,n=0;n<16;n++)for(hn[n]=s,e=0;e<1<<fn[n];e++)cr[s++]=n;for(s>>=7;n<Tt;n++)for(hn[n]=s<<7,e=0;e<1<<fn[n]-7;e++)cr[256+s++]=n;for(r=0;r<=nt;r++)a[r]=0;for(e=0;e<=143;)ve[e*2+1]=8,e++,a[8]++;for(;e<=255;)ve[e*2+1]=9,e++,a[9]++;for(;e<=279;)ve[e*2+1]=7,e++,a[7]++;for(;e<=287;)ve[e*2+1]=8,e++,a[8]++;for(Ri(ve,lr+1,a),e=0;e<Tt;e++)ar[e*2+1]=5,ar[e*2]=wi(e,5);mi=new Qn(ve,fs,mr+1,lr,nt),yi=new Qn(ar,fn,0,Tt,nt),_i=new Qn(new Array(0),_l,0,xs,yl)},xi=e=>{let r;for(r=0;r<lr;r++)e.dyn_ltree[r*2]=0;for(r=0;r<Tt;r++)e.dyn_dtree[r*2]=0;for(r=0;r<xs;r++)e.bl_tree[r*2]=0;e.dyn_ltree[Es*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Ei=e=>{e.bi_valid>8?dr(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},ka=(e,r,t,n)=>{let s=r*2,a=t*2;return e[s]<e[a]||e[s]===e[a]&&n[r]<=n[t]},ts=(e,r,t)=>{let n=e.heap[t],s=t<<1;for(;s<=e.heap_len&&(s<e.heap_len&&ka(r,e.heap[s+1],e.heap[s],e.depth)&&s++,!ka(r,n,e.heap[s],e.depth));)e.heap[t]=e.heap[s],t=s,s<<=1;e.heap[t]=n},Ta=(e,r,t)=>{let n,s,a=0,i,o;if(e.sym_next!==0)do n=e.pending_buf[e.sym_buf+a++]&255,n+=(e.pending_buf[e.sym_buf+a++]&255)<<8,s=e.pending_buf[e.sym_buf+a++],n===0?me(e,s,r):(i=ur[s],me(e,i+mr+1,r),o=fs[i],o!==0&&(s-=vs[i],K(e,s,o)),n--,i=bi(n),me(e,i,t),o=fn[i],o!==0&&(n-=hn[i],K(e,n,o)));while(a<e.sym_next);me(e,Es,r)},hs=(e,r)=>{let t=r.dyn_tree,n=r.stat_desc.static_tree,s=r.stat_desc.has_stree,a=r.stat_desc.elems,i,o,d=-1,l;for(e.heap_len=0,e.heap_max=di,i=0;i<a;i++)t[i*2]!==0?(e.heap[++e.heap_len]=d=i,e.depth[i]=0):t[i*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=d<2?++d:0,t[l*2]=1,e.depth[l]=0,e.opt_len--,s&&(e.static_len-=n[l*2+1]);for(r.max_code=d,i=e.heap_len>>1;i>=1;i--)ts(e,t,i);l=a;do i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],ts(e,t,1),o=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=o,t[l*2]=t[i*2]+t[o*2],e.depth[l]=(e.depth[i]>=e.depth[o]?e.depth[i]:e.depth[o])+1,t[i*2+1]=t[o*2+1]=l,e.heap[1]=l++,ts(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Rl(e,r),Ri(t,d,e.bl_count)},Aa=(e,r,t)=>{let n,s=-1,a,i=r[1],o=0,d=7,l=4;for(i===0&&(d=138,l=3),r[(t+1)*2+1]=65535,n=0;n<=t;n++)a=i,i=r[(n+1)*2+1],!(++o<d&&a===i)&&(o<l?e.bl_tree[a*2]+=o:a!==0?(a!==s&&e.bl_tree[a*2]++,e.bl_tree[fi*2]++):o<=10?e.bl_tree[hi*2]++:e.bl_tree[pi*2]++,o=0,s=a,i===0?(d=138,l=3):a===i?(d=6,l=3):(d=7,l=4))},Da=(e,r,t)=>{let n,s=-1,a,i=r[1],o=0,d=7,l=4;for(i===0&&(d=138,l=3),n=0;n<=t;n++)if(a=i,i=r[(n+1)*2+1],!(++o<d&&a===i)){if(o<l)do me(e,a,e.bl_tree);while(--o!==0);else a!==0?(a!==s&&(me(e,a,e.bl_tree),o--),me(e,fi,e.bl_tree),K(e,o-3,2)):o<=10?(me(e,hi,e.bl_tree),K(e,o-3,3)):(me(e,pi,e.bl_tree),K(e,o-11,7));o=0,s=a,i===0?(d=138,l=3):a===i?(d=6,l=3):(d=7,l=4)}},El=e=>{let r;for(Aa(e,e.dyn_ltree,e.l_desc.max_code),Aa(e,e.dyn_dtree,e.d_desc.max_code),hs(e,e.bl_desc),r=xs-1;r>=3&&e.bl_tree[gi[r]*2+1]===0;r--);return e.opt_len+=3*(r+1)+5+5+4,r},vl=(e,r,t,n)=>{let s;for(K(e,r-257,5),K(e,t-1,5),K(e,n-4,4),s=0;s<n;s++)K(e,e.bl_tree[gi[s]*2+1],3);Da(e,e.dyn_ltree,r-1),Da(e,e.dyn_dtree,t-1)},Sl=e=>{let r=4093624447,t;for(t=0;t<=31;t++,r>>>=1)if(r&1&&e.dyn_ltree[t*2]!==0)return 0;if(e.dyn_ltree[18]!==0||e.dyn_ltree[20]!==0||e.dyn_ltree[26]!==0)return 1;for(t=32;t<mr;t++)if(e.dyn_ltree[t*2]!==0)return 1;return 0},Pa=!1,kl=e=>{Pa||(xl(),Pa=!0),e.l_desc=new es(e.dyn_ltree,mi),e.d_desc=new es(e.dyn_dtree,yi),e.bl_desc=new es(e.bl_tree,_i),e.bi_buf=0,e.bi_valid=0,xi(e)},vi=(e,r,t,n)=>{K(e,(hl<<1)+(n?1:0),3),Ei(e),dr(e,t),dr(e,~t),t&&e.pending_buf.set(e.window.subarray(r,r+t),e.pending),e.pending+=t},Tl=e=>{K(e,ui<<1,3),me(e,Es,ve),wl(e)},Al=(e,r,t,n)=>{let s,a,i=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=Sl(e)),hs(e,e.l_desc),hs(e,e.d_desc),i=El(e),s=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=s&&(s=a)):s=a=t+5,t+4<=s&&r!==-1?vi(e,r,t,n):e.strategy===4||a===s?(K(e,(ui<<1)+(n?1:0),3),Ta(e,ve,ar)):(K(e,(pl<<1)+(n?1:0),3),vl(e,e.l_desc.max_code+1,e.d_desc.max_code+1,i+1),Ta(e,e.dyn_ltree,e.dyn_dtree)),xi(e),n&&Ei(e)},Dl=(e,r,t)=>(e.pending_buf[e.sym_buf+e.sym_next++]=r,e.pending_buf[e.sym_buf+e.sym_next++]=r>>8,e.pending_buf[e.sym_buf+e.sym_next++]=t,r===0?e.dyn_ltree[t*2]++:(e.matches++,r--,e.dyn_ltree[(ur[t]+mr+1)*2]++,e.dyn_dtree[bi(r)*2]++),e.sym_next===e.sym_end),Pl=kl,Ml=vi,Ol=Al,Il=Dl,Nl=Tl,Ul={_tr_init:Pl,_tr_stored_block:Ml,_tr_flush_block:Ol,_tr_tally:Il,_tr_align:Nl},Wl=(e,r,t,n)=>{let s=e&65535|0,a=e>>>16&65535|0,i=0;for(;t!==0;){i=t>2e3?2e3:t,t-=i;do s=s+r[n++]|0,a=a+s|0;while(--i);s%=65521,a%=65521}return s|a<<16|0},fr=Wl,Cl=()=>{let e,r=[];for(var t=0;t<256;t++){e=t;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;r[t]=e}return r},Fl=new Uint32Array(Cl()),Ll=(e,r,t,n)=>{let s=Fl,a=n+t;e^=-1;for(let i=n;i<a;i++)e=e>>>8^s[(e^r[i])&255];return e^-1},q=Ll,it={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Mt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:Bl,_tr_stored_block:ps,_tr_flush_block:zl,_tr_tally:Ie,_tr_align:jl}=Ul,{Z_NO_FLUSH:Ne,Z_PARTIAL_FLUSH:Hl,Z_FULL_FLUSH:ql,Z_FINISH:ie,Z_BLOCK:Ma,Z_OK:J,Z_STREAM_END:Oa,Z_STREAM_ERROR:ye,Z_DATA_ERROR:$l,Z_BUF_ERROR:rs,Z_DEFAULT_COMPRESSION:Vl,Z_FILTERED:Zl,Z_HUFFMAN_ONLY:on,Z_RLE:Jl,Z_FIXED:Xl,Z_DEFAULT_STRATEGY:Gl,Z_UNKNOWN:Kl,Z_DEFLATED:mn}=Mt,Yl=9,Ql=15,ec=8,tc=29,rc=256,gs=rc+1+tc,nc=30,sc=19,ac=2*gs+1,ic=15,O=3,Oe=258,_e=Oe+O+1,oc=32,At=42,Ss=57,ms=69,ys=73,_s=91,bs=103,st=113,nr=666,G=1,Ot=2,ot=3,It=4,lc=3,at=(e,r)=>(e.msg=it[r],r),Ia=e=>e*2-(e>4?9:0),Me=e=>{let r=e.length;for(;--r>=0;)e[r]=0},cc=e=>{let r,t,n,s=e.w_size;r=e.hash_size,n=r;do t=e.head[--n],e.head[n]=t>=s?t-s:0;while(--r);r=s,n=r;do t=e.prev[--n],e.prev[n]=t>=s?t-s:0;while(--r)},uc=(e,r,t)=>(r<<e.hash_shift^t)&e.hash_mask,Ue=uc,Q=e=>{let r=e.state,t=r.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(e.output.set(r.pending_buf.subarray(r.pending_out,r.pending_out+t),e.next_out),e.next_out+=t,r.pending_out+=t,e.total_out+=t,e.avail_out-=t,r.pending-=t,r.pending===0&&(r.pending_out=0))},ee=(e,r)=>{zl(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,r),e.block_start=e.strstart,Q(e.strm)},N=(e,r)=>{e.pending_buf[e.pending++]=r},rr=(e,r)=>{e.pending_buf[e.pending++]=r>>>8&255,e.pending_buf[e.pending++]=r&255},ws=(e,r,t,n)=>{let s=e.avail_in;return s>n&&(s=n),s===0?0:(e.avail_in-=s,r.set(e.input.subarray(e.next_in,e.next_in+s),t),e.state.wrap===1?e.adler=fr(e.adler,r,s,t):e.state.wrap===2&&(e.adler=q(e.adler,r,s,t)),e.next_in+=s,e.total_in+=s,s)},Si=(e,r)=>{let t=e.max_chain_length,n=e.strstart,s,a,i=e.prev_length,o=e.nice_match,d=e.strstart>e.w_size-_e?e.strstart-(e.w_size-_e):0,l=e.window,u=e.w_mask,b=e.prev,g=e.strstart+Oe,f=l[n+i-1],y=l[n+i];e.prev_length>=e.good_match&&(t>>=2),o>e.lookahead&&(o=e.lookahead);do if(s=r,!(l[s+i]!==y||l[s+i-1]!==f||l[s]!==l[n]||l[++s]!==l[n+1])){n+=2,s++;do;while(l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&n<g);if(a=Oe-(g-n),n=g-Oe,a>i){if(e.match_start=r,i=a,a>=o)break;f=l[n+i-1],y=l[n+i]}}while((r=b[r&u])>d&&--t!==0);return i<=e.lookahead?i:e.lookahead},Dt=e=>{let r=e.w_size,t,n,s;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=r+(r-_e)&&(e.window.set(e.window.subarray(r,r+r-n),0),e.match_start-=r,e.strstart-=r,e.block_start-=r,e.insert>e.strstart&&(e.insert=e.strstart),cc(e),n+=r),e.strm.avail_in===0)break;if(t=ws(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=O)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=Ue(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=Ue(e,e.ins_h,e.window[s+O-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<O)););}while(e.lookahead<_e&&e.strm.avail_in!==0)},ki=(e,r)=>{let t=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,s,a,i=0,o=e.strm.avail_in;do{if(n=65535,a=e.bi_valid+42>>3,e.strm.avail_out<a||(a=e.strm.avail_out-a,s=e.strstart-e.block_start,n>s+e.strm.avail_in&&(n=s+e.strm.avail_in),n>a&&(n=a),n<t&&(n===0&&r!==ie||r===Ne||n!==s+e.strm.avail_in)))break;i=r===ie&&n===s+e.strm.avail_in?1:0,ps(e,0,0,i),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Q(e.strm),s&&(s>n&&(s=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+s),e.strm.next_out),e.strm.next_out+=s,e.strm.avail_out-=s,e.strm.total_out+=s,e.block_start+=s,n-=s),n&&(ws(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(i===0);return o-=e.strm.avail_in,o&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),i?It:r!==Ne&&r!==ie&&e.strm.avail_in===0&&e.strstart===e.block_start?Ot:(a=e.window_size-e.strstart,e.strm.avail_in>a&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,a+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),a>e.strm.avail_in&&(a=e.strm.avail_in),a&&(ws(e.strm,e.window,e.strstart,a),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.high_water<e.strstart&&(e.high_water=e.strstart),a=e.bi_valid+42>>3,a=e.pending_buf_size-a>65535?65535:e.pending_buf_size-a,t=a>e.w_size?e.w_size:a,s=e.strstart-e.block_start,(s>=t||(s||r===ie)&&r!==Ne&&e.strm.avail_in===0&&s<=a)&&(n=s>a?a:s,i=r===ie&&e.strm.avail_in===0&&n===s?1:0,ps(e,e.block_start,n,i),e.block_start+=n,Q(e.strm)),i?ot:G)},ns=(e,r)=>{let t,n;for(;;){if(e.lookahead<_e){if(Dt(e),e.lookahead<_e&&r===Ne)return G;if(e.lookahead===0)break}if(t=0,e.lookahead>=O&&(e.ins_h=Ue(e,e.ins_h,e.window[e.strstart+O-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-_e&&(e.match_length=Si(e,t)),e.match_length>=O)if(n=Ie(e,e.strstart-e.match_start,e.match_length-O),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=O){e.match_length--;do e.strstart++,e.ins_h=Ue(e,e.ins_h,e.window[e.strstart+O-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Ue(e,e.ins_h,e.window[e.strstart+1]);else n=Ie(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(ee(e,!1),e.strm.avail_out===0))return G}return e.insert=e.strstart<O-1?e.strstart:O-1,r===ie?(ee(e,!0),e.strm.avail_out===0?ot:It):e.sym_next&&(ee(e,!1),e.strm.avail_out===0)?G:Ot},St=(e,r)=>{let t,n,s;for(;;){if(e.lookahead<_e){if(Dt(e),e.lookahead<_e&&r===Ne)return G;if(e.lookahead===0)break}if(t=0,e.lookahead>=O&&(e.ins_h=Ue(e,e.ins_h,e.window[e.strstart+O-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=O-1,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-_e&&(e.match_length=Si(e,t),e.match_length<=5&&(e.strategy===Zl||e.match_length===O&&e.strstart-e.match_start>4096)&&(e.match_length=O-1)),e.prev_length>=O&&e.match_length<=e.prev_length){s=e.strstart+e.lookahead-O,n=Ie(e,e.strstart-1-e.prev_match,e.prev_length-O),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=s&&(e.ins_h=Ue(e,e.ins_h,e.window[e.strstart+O-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=O-1,e.strstart++,n&&(ee(e,!1),e.strm.avail_out===0))return G}else if(e.match_available){if(n=Ie(e,0,e.window[e.strstart-1]),n&&ee(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return G}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=Ie(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<O-1?e.strstart:O-1,r===ie?(ee(e,!0),e.strm.avail_out===0?ot:It):e.sym_next&&(ee(e,!1),e.strm.avail_out===0)?G:Ot},dc=(e,r)=>{let t,n,s,a,i=e.window;for(;;){if(e.lookahead<=Oe){if(Dt(e),e.lookahead<=Oe&&r===Ne)return G;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=O&&e.strstart>0&&(s=e.strstart-1,n=i[s],n===i[++s]&&n===i[++s]&&n===i[++s])){a=e.strstart+Oe;do;while(n===i[++s]&&n===i[++s]&&n===i[++s]&&n===i[++s]&&n===i[++s]&&n===i[++s]&&n===i[++s]&&n===i[++s]&&s<a);e.match_length=Oe-(a-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=O?(t=Ie(e,1,e.match_length-O),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=Ie(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(ee(e,!1),e.strm.avail_out===0))return G}return e.insert=0,r===ie?(ee(e,!0),e.strm.avail_out===0?ot:It):e.sym_next&&(ee(e,!1),e.strm.avail_out===0)?G:Ot},fc=(e,r)=>{let t;for(;;){if(e.lookahead===0&&(Dt(e),e.lookahead===0)){if(r===Ne)return G;break}if(e.match_length=0,t=Ie(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(ee(e,!1),e.strm.avail_out===0))return G}return e.insert=0,r===ie?(ee(e,!0),e.strm.avail_out===0?ot:It):e.sym_next&&(ee(e,!1),e.strm.avail_out===0)?G:Ot};function ge(e,r,t,n,s){this.good_length=e,this.max_lazy=r,this.nice_length=t,this.max_chain=n,this.func=s}var sr=[new ge(0,0,0,0,ki),new ge(4,4,8,4,ns),new ge(4,5,16,8,ns),new ge(4,6,32,32,ns),new ge(4,4,16,16,St),new ge(8,16,32,32,St),new ge(8,16,128,128,St),new ge(8,32,128,256,St),new ge(32,128,258,1024,St),new ge(32,258,258,4096,St)],hc=e=>{e.window_size=2*e.w_size,Me(e.head),e.max_lazy_match=sr[e.level].max_lazy,e.good_match=sr[e.level].good_length,e.nice_match=sr[e.level].nice_length,e.max_chain_length=sr[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=O-1,e.match_available=0,e.ins_h=0};function pc(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=mn,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(ac*2),this.dyn_dtree=new Uint16Array((2*nc+1)*2),this.bl_tree=new Uint16Array((2*sc+1)*2),Me(this.dyn_ltree),Me(this.dyn_dtree),Me(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(ic+1),this.heap=new Uint16Array(2*gs+1),Me(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*gs+1),Me(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var yr=e=>{if(!e)return 1;let r=e.state;return!r||r.strm!==e||r.status!==At&&r.status!==Ss&&r.status!==ms&&r.status!==ys&&r.status!==_s&&r.status!==bs&&r.status!==st&&r.status!==nr?1:0},Ti=e=>{if(yr(e))return at(e,ye);e.total_in=e.total_out=0,e.data_type=Kl;let r=e.state;return r.pending=0,r.pending_out=0,r.wrap<0&&(r.wrap=-r.wrap),r.status=r.wrap===2?Ss:r.wrap?At:st,e.adler=r.wrap===2?0:1,r.last_flush=-2,Bl(r),J},Ai=e=>{let r=Ti(e);return r===J&&hc(e.state),r},gc=(e,r)=>yr(e)||e.state.wrap!==2?ye:(e.state.gzhead=r,J),Di=(e,r,t,n,s,a)=>{if(!e)return ye;let i=1;if(r===Vl&&(r=6),n<0?(i=0,n=-n):n>15&&(i=2,n-=16),s<1||s>Yl||t!==mn||n<8||n>15||r<0||r>9||a<0||a>Xl||n===8&&i!==1)return at(e,ye);n===8&&(n=9);let o=new pc;return e.state=o,o.strm=e,o.status=At,o.wrap=i,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=s+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+O-1)/O),o.window=new Uint8Array(o.w_size*2),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<s+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=(o.lit_bufsize-1)*3,o.level=r,o.strategy=a,o.method=t,Ai(e)},mc=(e,r)=>Di(e,r,mn,Ql,ec,Gl),yc=(e,r)=>{if(yr(e)||r>Ma||r<0)return e?at(e,ye):ye;let t=e.state;if(!e.output||e.avail_in!==0&&!e.input||t.status===nr&&r!==ie)return at(e,e.avail_out===0?rs:ye);let n=t.last_flush;if(t.last_flush=r,t.pending!==0){if(Q(e),e.avail_out===0)return t.last_flush=-1,J}else if(e.avail_in===0&&Ia(r)<=Ia(n)&&r!==ie)return at(e,rs);if(t.status===nr&&e.avail_in!==0)return at(e,rs);if(t.status===At&&t.wrap===0&&(t.status=st),t.status===At){let s=mn+(t.w_bits-8<<4)<<8,a=-1;if(t.strategy>=on||t.level<2?a=0:t.level<6?a=1:t.level===6?a=2:a=3,s|=a<<6,t.strstart!==0&&(s|=oc),s+=31-s%31,rr(t,s),t.strstart!==0&&(rr(t,e.adler>>>16),rr(t,e.adler&65535)),e.adler=1,t.status=st,Q(e),t.pending!==0)return t.last_flush=-1,J}if(t.status===Ss){if(e.adler=0,N(t,31),N(t,139),N(t,8),t.gzhead)N(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),N(t,t.gzhead.time&255),N(t,t.gzhead.time>>8&255),N(t,t.gzhead.time>>16&255),N(t,t.gzhead.time>>24&255),N(t,t.level===9?2:t.strategy>=on||t.level<2?4:0),N(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(N(t,t.gzhead.extra.length&255),N(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=q(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=ms;else if(N(t,0),N(t,0),N(t,0),N(t,0),N(t,0),N(t,t.level===9?2:t.strategy>=on||t.level<2?4:0),N(t,lc),t.status=st,Q(e),t.pending!==0)return t.last_flush=-1,J}if(t.status===ms){if(t.gzhead.extra){let s=t.pending,a=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+a>t.pending_buf_size;){let o=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>s&&(e.adler=q(e.adler,t.pending_buf,t.pending-s,s)),t.gzindex+=o,Q(e),t.pending!==0)return t.last_flush=-1,J;s=0,a-=o}let i=new Uint8Array(t.gzhead.extra);t.pending_buf.set(i.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending+=a,t.gzhead.hcrc&&t.pending>s&&(e.adler=q(e.adler,t.pending_buf,t.pending-s,s)),t.gzindex=0}t.status=ys}if(t.status===ys){if(t.gzhead.name){let s=t.pending,a;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>s&&(e.adler=q(e.adler,t.pending_buf,t.pending-s,s)),Q(e),t.pending!==0)return t.last_flush=-1,J;s=0}t.gzindex<t.gzhead.name.length?a=t.gzhead.name.charCodeAt(t.gzindex++)&255:a=0,N(t,a)}while(a!==0);t.gzhead.hcrc&&t.pending>s&&(e.adler=q(e.adler,t.pending_buf,t.pending-s,s)),t.gzindex=0}t.status=_s}if(t.status===_s){if(t.gzhead.comment){let s=t.pending,a;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>s&&(e.adler=q(e.adler,t.pending_buf,t.pending-s,s)),Q(e),t.pending!==0)return t.last_flush=-1,J;s=0}t.gzindex<t.gzhead.comment.length?a=t.gzhead.comment.charCodeAt(t.gzindex++)&255:a=0,N(t,a)}while(a!==0);t.gzhead.hcrc&&t.pending>s&&(e.adler=q(e.adler,t.pending_buf,t.pending-s,s))}t.status=bs}if(t.status===bs){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(Q(e),t.pending!==0))return t.last_flush=-1,J;N(t,e.adler&255),N(t,e.adler>>8&255),e.adler=0}if(t.status=st,Q(e),t.pending!==0)return t.last_flush=-1,J}if(e.avail_in!==0||t.lookahead!==0||r!==Ne&&t.status!==nr){let s=t.level===0?ki(t,r):t.strategy===on?fc(t,r):t.strategy===Jl?dc(t,r):sr[t.level].func(t,r);if((s===ot||s===It)&&(t.status=nr),s===G||s===ot)return e.avail_out===0&&(t.last_flush=-1),J;if(s===Ot&&(r===Hl?jl(t):r!==Ma&&(ps(t,0,0,!1),r===ql&&(Me(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),Q(e),e.avail_out===0))return t.last_flush=-1,J}return r!==ie?J:t.wrap<=0?Oa:(t.wrap===2?(N(t,e.adler&255),N(t,e.adler>>8&255),N(t,e.adler>>16&255),N(t,e.adler>>24&255),N(t,e.total_in&255),N(t,e.total_in>>8&255),N(t,e.total_in>>16&255),N(t,e.total_in>>24&255)):(rr(t,e.adler>>>16),rr(t,e.adler&65535)),Q(e),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?J:Oa)},_c=e=>{if(yr(e))return ye;let r=e.state.status;return e.state=null,r===st?at(e,$l):J},bc=(e,r)=>{let t=r.length;if(yr(e))return ye;let n=e.state,s=n.wrap;if(s===2||s===1&&n.status!==At||n.lookahead)return ye;if(s===1&&(e.adler=fr(e.adler,r,t,0)),n.wrap=0,t>=n.w_size){s===0&&(Me(n.head),n.strstart=0,n.block_start=0,n.insert=0);let d=new Uint8Array(n.w_size);d.set(r.subarray(t-n.w_size,t),0),r=d,t=n.w_size}let a=e.avail_in,i=e.next_in,o=e.input;for(e.avail_in=t,e.next_in=0,e.input=r,Dt(n);n.lookahead>=O;){let d=n.strstart,l=n.lookahead-(O-1);do n.ins_h=Ue(n,n.ins_h,n.window[d+O-1]),n.prev[d&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=d,d++;while(--l);n.strstart=d,n.lookahead=O-1,Dt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=O-1,n.match_available=0,e.next_in=i,e.input=o,e.avail_in=a,n.wrap=s,J},wc=mc,Rc=Di,xc=Ai,Ec=Ti,vc=gc,Sc=yc,kc=_c,Tc=bc,Ac="pako deflate (from Nodeca project)",ir={deflateInit:wc,deflateInit2:Rc,deflateReset:xc,deflateResetKeep:Ec,deflateSetHeader:vc,deflate:Sc,deflateEnd:kc,deflateSetDictionary:Tc,deflateInfo:Ac},Dc=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),Pc=function(e){let r=Array.prototype.slice.call(arguments,1);for(;r.length;){let t=r.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(let n in t)Dc(t,n)&&(e[n]=t[n])}}return e},Mc=e=>{let r=0;for(let n=0,s=e.length;n<s;n++)r+=e[n].length;let t=new Uint8Array(r);for(let n=0,s=0,a=e.length;n<a;n++){let i=e[n];t.set(i,s),s+=i.length}return t},yn={assign:Pc,flattenChunks:Mc},Pi=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Pi=!1}var hr=new Uint8Array(256);for(let e=0;e<256;e++)hr[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;hr[254]=hr[254]=1;var Oc=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let r,t,n,s,a,i=e.length,o=0;for(s=0;s<i;s++)t=e.charCodeAt(s),(t&64512)===55296&&s+1<i&&(n=e.charCodeAt(s+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),s++)),o+=t<128?1:t<2048?2:t<65536?3:4;for(r=new Uint8Array(o),a=0,s=0;a<o;s++)t=e.charCodeAt(s),(t&64512)===55296&&s+1<i&&(n=e.charCodeAt(s+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),s++)),t<128?r[a++]=t:t<2048?(r[a++]=192|t>>>6,r[a++]=128|t&63):t<65536?(r[a++]=224|t>>>12,r[a++]=128|t>>>6&63,r[a++]=128|t&63):(r[a++]=240|t>>>18,r[a++]=128|t>>>12&63,r[a++]=128|t>>>6&63,r[a++]=128|t&63);return r},Ic=(e,r)=>{if(r<65534&&e.subarray&&Pi)return String.fromCharCode.apply(null,e.length===r?e:e.subarray(0,r));let t="";for(let n=0;n<r;n++)t+=String.fromCharCode(e[n]);return t},Nc=(e,r)=>{let t=r||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,r));let n,s,a=new Array(t*2);for(s=0,n=0;n<t;){let i=e[n++];if(i<128){a[s++]=i;continue}let o=hr[i];if(o>4){a[s++]=65533,n+=o-1;continue}for(i&=o===2?31:o===3?15:7;o>1&&n<t;)i=i<<6|e[n++]&63,o--;if(o>1){a[s++]=65533;continue}i<65536?a[s++]=i:(i-=65536,a[s++]=55296|i>>10&1023,a[s++]=56320|i&1023)}return Ic(a,s)},Uc=(e,r)=>{r=r||e.length,r>e.length&&(r=e.length);let t=r-1;for(;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?r:t+hr[e[t]]>r?t:r},pr={string2buf:Oc,buf2string:Nc,utf8border:Uc};function Wc(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Mi=Wc,Oi=Object.prototype.toString,{Z_NO_FLUSH:Cc,Z_SYNC_FLUSH:Fc,Z_FULL_FLUSH:Lc,Z_FINISH:Bc,Z_OK:pn,Z_STREAM_END:zc,Z_DEFAULT_COMPRESSION:jc,Z_DEFAULT_STRATEGY:Hc,Z_DEFLATED:qc}=Mt;function _r(e){this.options=yn.assign({level:jc,method:qc,chunkSize:16384,windowBits:15,memLevel:8,strategy:Hc},e||{});let r=this.options;r.raw&&r.windowBits>0?r.windowBits=-r.windowBits:r.gzip&&r.windowBits>0&&r.windowBits<16&&(r.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Mi,this.strm.avail_out=0;let t=ir.deflateInit2(this.strm,r.level,r.method,r.windowBits,r.memLevel,r.strategy);if(t!==pn)throw new Error(it[t]);if(r.header&&ir.deflateSetHeader(this.strm,r.header),r.dictionary){let n;if(typeof r.dictionary=="string"?n=pr.string2buf(r.dictionary):Oi.call(r.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(r.dictionary):n=r.dictionary,t=ir.deflateSetDictionary(this.strm,n),t!==pn)throw new Error(it[t]);this._dict_set=!0}}_r.prototype.push=function(e,r){let t=this.strm,n=this.options.chunkSize,s,a;if(this.ended)return!1;for(r===~~r?a=r:a=r===!0?Bc:Cc,typeof e=="string"?t.input=pr.string2buf(e):Oi.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),(a===Fc||a===Lc)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(s=ir.deflate(t,a),s===zc)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),s=ir.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===pn;if(t.avail_out===0){this.onData(t.output);continue}if(a>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};_r.prototype.onData=function(e){this.chunks.push(e)};_r.prototype.onEnd=function(e){e===pn&&(this.result=yn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function ks(e,r){let t=new _r(r);if(t.push(e,!0),t.err)throw t.msg||it[t.err];return t.result}function $c(e,r){return r=r||{},r.raw=!0,ks(e,r)}function Vc(e,r){return r=r||{},r.gzip=!0,ks(e,r)}var Zc=_r,Jc=ks,Xc=$c,Gc=Vc,Kc=Mt,Yc={Deflate:Zc,deflate:Jc,deflateRaw:Xc,gzip:Gc,constants:Kc},ln=16209,Qc=16191,eu=function(r,t){let n,s,a,i,o,d,l,u,b,g,f,y,v,R,w,S,p,h,k,U,_,I,P,E,D=r.state;n=r.next_in,P=r.input,s=n+(r.avail_in-5),a=r.next_out,E=r.output,i=a-(t-r.avail_out),o=a+(r.avail_out-257),d=D.dmax,l=D.wsize,u=D.whave,b=D.wnext,g=D.window,f=D.hold,y=D.bits,v=D.lencode,R=D.distcode,w=(1<<D.lenbits)-1,S=(1<<D.distbits)-1;e:do{y<15&&(f+=P[n++]<<y,y+=8,f+=P[n++]<<y,y+=8),p=v[f&w];t:for(;;){if(h=p>>>24,f>>>=h,y-=h,h=p>>>16&255,h===0)E[a++]=p&65535;else if(h&16){k=p&65535,h&=15,h&&(y<h&&(f+=P[n++]<<y,y+=8),k+=f&(1<<h)-1,f>>>=h,y-=h),y<15&&(f+=P[n++]<<y,y+=8,f+=P[n++]<<y,y+=8),p=R[f&S];r:for(;;){if(h=p>>>24,f>>>=h,y-=h,h=p>>>16&255,h&16){if(U=p&65535,h&=15,y<h&&(f+=P[n++]<<y,y+=8,y<h&&(f+=P[n++]<<y,y+=8)),U+=f&(1<<h)-1,U>d){r.msg="invalid distance too far back",D.mode=ln;break e}if(f>>>=h,y-=h,h=a-i,U>h){if(h=U-h,h>u&&D.sane){r.msg="invalid distance too far back",D.mode=ln;break e}if(_=0,I=g,b===0){if(_+=l-h,h<k){k-=h;do E[a++]=g[_++];while(--h);_=a-U,I=E}}else if(b<h){if(_+=l+b-h,h-=b,h<k){k-=h;do E[a++]=g[_++];while(--h);if(_=0,b<k){h=b,k-=h;do E[a++]=g[_++];while(--h);_=a-U,I=E}}}else if(_+=b-h,h<k){k-=h;do E[a++]=g[_++];while(--h);_=a-U,I=E}for(;k>2;)E[a++]=I[_++],E[a++]=I[_++],E[a++]=I[_++],k-=3;k&&(E[a++]=I[_++],k>1&&(E[a++]=I[_++]))}else{_=a-U;do E[a++]=E[_++],E[a++]=E[_++],E[a++]=E[_++],k-=3;while(k>2);k&&(E[a++]=E[_++],k>1&&(E[a++]=E[_++]))}}else if((h&64)===0){p=R[(p&65535)+(f&(1<<h)-1)];continue r}else{r.msg="invalid distance code",D.mode=ln;break e}break}}else if((h&64)===0){p=v[(p&65535)+(f&(1<<h)-1)];continue t}else if(h&32){D.mode=Qc;break e}else{r.msg="invalid literal/length code",D.mode=ln;break e}break}}while(n<s&&a<o);k=y>>3,n-=k,y-=k<<3,f&=(1<<y)-1,r.next_in=n,r.next_out=a,r.avail_in=n<s?5+(s-n):5-(n-s),r.avail_out=a<o?257+(o-a):257-(a-o),D.hold=f,D.bits=y},kt=15,Na=852,Ua=592,Wa=0,ss=1,Ca=2,tu=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ru=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),nu=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),su=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),au=(e,r,t,n,s,a,i,o)=>{let d=o.bits,l=0,u=0,b=0,g=0,f=0,y=0,v=0,R=0,w=0,S=0,p,h,k,U,_,I=null,P,E=new Uint16Array(kt+1),D=new Uint16Array(kt+1),$=null,Wt,We,Ce;for(l=0;l<=kt;l++)E[l]=0;for(u=0;u<n;u++)E[r[t+u]]++;for(f=d,g=kt;g>=1&&E[g]===0;g--);if(f>g&&(f=g),g===0)return s[a++]=1<<24|64<<16|0,s[a++]=1<<24|64<<16|0,o.bits=1,0;for(b=1;b<g&&E[b]===0;b++);for(f<b&&(f=b),R=1,l=1;l<=kt;l++)if(R<<=1,R-=E[l],R<0)return-1;if(R>0&&(e===Wa||g!==1))return-1;for(D[1]=0,l=1;l<kt;l++)D[l+1]=D[l]+E[l];for(u=0;u<n;u++)r[t+u]!==0&&(i[D[r[t+u]]++]=u);if(e===Wa?(I=$=i,P=20):e===ss?(I=tu,$=ru,P=257):(I=nu,$=su,P=0),S=0,u=0,l=b,_=a,y=f,v=0,k=-1,w=1<<f,U=w-1,e===ss&&w>Na||e===Ca&&w>Ua)return 1;for(;;){Wt=l-v,i[u]+1<P?(We=0,Ce=i[u]):i[u]>=P?(We=$[i[u]-P],Ce=I[i[u]-P]):(We=96,Ce=0),p=1<<l-v,h=1<<y,b=h;do h-=p,s[_+(S>>v)+h]=Wt<<24|We<<16|Ce|0;while(h!==0);for(p=1<<l-1;S&p;)p>>=1;if(p!==0?(S&=p-1,S+=p):S=0,u++,--E[l]===0){if(l===g)break;l=r[t+i[u]]}if(l>f&&(S&U)!==k){for(v===0&&(v=f),_+=b,y=l-v,R=1<<y;y+v<g&&(R-=E[y+v],!(R<=0));)y++,R<<=1;if(w+=1<<y,e===ss&&w>Na||e===Ca&&w>Ua)return 1;k=S&U,s[k]=f<<24|y<<16|_-a|0}}return S!==0&&(s[_+S]=l-v<<24|64<<16|0),o.bits=f,0},or=au,iu=0,Ii=1,Ni=2,{Z_FINISH:Fa,Z_BLOCK:ou,Z_TREES:cn,Z_OK:lt,Z_STREAM_END:lu,Z_NEED_DICT:cu,Z_STREAM_ERROR:oe,Z_DATA_ERROR:Ui,Z_MEM_ERROR:Wi,Z_BUF_ERROR:uu,Z_DEFLATED:La}=Mt,_n=16180,Ba=16181,za=16182,ja=16183,Ha=16184,qa=16185,$a=16186,Va=16187,Za=16188,Ja=16189,gn=16190,Ee=16191,as=16192,Xa=16193,is=16194,Ga=16195,Ka=16196,Ya=16197,Qa=16198,un=16199,dn=16200,ei=16201,ti=16202,ri=16203,ni=16204,si=16205,os=16206,ai=16207,ii=16208,L=16209,Ci=16210,Fi=16211,du=852,fu=592,hu=15,pu=hu,oi=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function gu(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var ct=e=>{if(!e)return 1;let r=e.state;return!r||r.strm!==e||r.mode<_n||r.mode>Fi?1:0},Li=e=>{if(ct(e))return oe;let r=e.state;return e.total_in=e.total_out=r.total=0,e.msg="",r.wrap&&(e.adler=r.wrap&1),r.mode=_n,r.last=0,r.havedict=0,r.flags=-1,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new Int32Array(du),r.distcode=r.distdyn=new Int32Array(fu),r.sane=1,r.back=-1,lt},Bi=e=>{if(ct(e))return oe;let r=e.state;return r.wsize=0,r.whave=0,r.wnext=0,Li(e)},zi=(e,r)=>{let t;if(ct(e))return oe;let n=e.state;return r<0?(t=0,r=-r):(t=(r>>4)+5,r<48&&(r&=15)),r&&(r<8||r>15)?oe:(n.window!==null&&n.wbits!==r&&(n.window=null),n.wrap=t,n.wbits=r,Bi(e))},ji=(e,r)=>{if(!e)return oe;let t=new gu;e.state=t,t.strm=e,t.window=null,t.mode=_n;let n=zi(e,r);return n!==lt&&(e.state=null),n},mu=e=>ji(e,pu),li=!0,ls,cs,yu=e=>{if(li){ls=new Int32Array(512),cs=new Int32Array(32);let r=0;for(;r<144;)e.lens[r++]=8;for(;r<256;)e.lens[r++]=9;for(;r<280;)e.lens[r++]=7;for(;r<288;)e.lens[r++]=8;for(or(Ii,e.lens,0,288,ls,0,e.work,{bits:9}),r=0;r<32;)e.lens[r++]=5;or(Ni,e.lens,0,32,cs,0,e.work,{bits:5}),li=!1}e.lencode=ls,e.lenbits=9,e.distcode=cs,e.distbits=5},Hi=(e,r,t,n)=>{let s,a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(r.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):(s=a.wsize-a.wnext,s>n&&(s=n),a.window.set(r.subarray(t-n,t-n+s),a.wnext),n-=s,n?(a.window.set(r.subarray(t-n,t),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=s,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=s))),0},_u=(e,r)=>{let t,n,s,a,i,o,d,l,u,b,g,f,y,v,R=0,w,S,p,h,k,U,_,I,P=new Uint8Array(4),E,D,$=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ct(e)||!e.output||!e.input&&e.avail_in!==0)return oe;t=e.state,t.mode===Ee&&(t.mode=as),i=e.next_out,s=e.output,d=e.avail_out,a=e.next_in,n=e.input,o=e.avail_in,l=t.hold,u=t.bits,b=o,g=d,I=lt;e:for(;;)switch(t.mode){case _n:if(t.wrap===0){t.mode=as;break}for(;u<16;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if(t.wrap&2&&l===35615){t.wbits===0&&(t.wbits=15),t.check=0,P[0]=l&255,P[1]=l>>>8&255,t.check=q(t.check,P,2,0),l=0,u=0,t.mode=Ba;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",t.mode=L;break}if((l&15)!==La){e.msg="unknown compression method",t.mode=L;break}if(l>>>=4,u-=4,_=(l&15)+8,t.wbits===0&&(t.wbits=_),_>15||_>t.wbits){e.msg="invalid window size",t.mode=L;break}t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=l&512?Ja:Ee,l=0,u=0;break;case Ba:for(;u<16;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if(t.flags=l,(t.flags&255)!==La){e.msg="unknown compression method",t.mode=L;break}if(t.flags&57344){e.msg="unknown header flags set",t.mode=L;break}t.head&&(t.head.text=l>>8&1),t.flags&512&&t.wrap&4&&(P[0]=l&255,P[1]=l>>>8&255,t.check=q(t.check,P,2,0)),l=0,u=0,t.mode=za;case za:for(;u<32;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}t.head&&(t.head.time=l),t.flags&512&&t.wrap&4&&(P[0]=l&255,P[1]=l>>>8&255,P[2]=l>>>16&255,P[3]=l>>>24&255,t.check=q(t.check,P,4,0)),l=0,u=0,t.mode=ja;case ja:for(;u<16;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}t.head&&(t.head.xflags=l&255,t.head.os=l>>8),t.flags&512&&t.wrap&4&&(P[0]=l&255,P[1]=l>>>8&255,t.check=q(t.check,P,2,0)),l=0,u=0,t.mode=Ha;case Ha:if(t.flags&1024){for(;u<16;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}t.length=l,t.head&&(t.head.extra_len=l),t.flags&512&&t.wrap&4&&(P[0]=l&255,P[1]=l>>>8&255,t.check=q(t.check,P,2,0)),l=0,u=0}else t.head&&(t.head.extra=null);t.mode=qa;case qa:if(t.flags&1024&&(f=t.length,f>o&&(f=o),f&&(t.head&&(_=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(a,a+f),_)),t.flags&512&&t.wrap&4&&(t.check=q(t.check,n,f,a)),o-=f,a+=f,t.length-=f),t.length))break e;t.length=0,t.mode=$a;case $a:if(t.flags&2048){if(o===0)break e;f=0;do _=n[a+f++],t.head&&_&&t.length<65536&&(t.head.name+=String.fromCharCode(_));while(_&&f<o);if(t.flags&512&&t.wrap&4&&(t.check=q(t.check,n,f,a)),o-=f,a+=f,_)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Va;case Va:if(t.flags&4096){if(o===0)break e;f=0;do _=n[a+f++],t.head&&_&&t.length<65536&&(t.head.comment+=String.fromCharCode(_));while(_&&f<o);if(t.flags&512&&t.wrap&4&&(t.check=q(t.check,n,f,a)),o-=f,a+=f,_)break e}else t.head&&(t.head.comment=null);t.mode=Za;case Za:if(t.flags&512){for(;u<16;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if(t.wrap&4&&l!==(t.check&65535)){e.msg="header crc mismatch",t.mode=L;break}l=0,u=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=Ee;break;case Ja:for(;u<32;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}e.adler=t.check=oi(l),l=0,u=0,t.mode=gn;case gn:if(t.havedict===0)return e.next_out=i,e.avail_out=d,e.next_in=a,e.avail_in=o,t.hold=l,t.bits=u,cu;e.adler=t.check=1,t.mode=Ee;case Ee:if(r===ou||r===cn)break e;case as:if(t.last){l>>>=u&7,u-=u&7,t.mode=os;break}for(;u<3;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}switch(t.last=l&1,l>>>=1,u-=1,l&3){case 0:t.mode=Xa;break;case 1:if(yu(t),t.mode=un,r===cn){l>>>=2,u-=2;break e}break;case 2:t.mode=Ka;break;case 3:e.msg="invalid block type",t.mode=L}l>>>=2,u-=2;break;case Xa:for(l>>>=u&7,u-=u&7;u<32;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",t.mode=L;break}if(t.length=l&65535,l=0,u=0,t.mode=is,r===cn)break e;case is:t.mode=Ga;case Ga:if(f=t.length,f){if(f>o&&(f=o),f>d&&(f=d),f===0)break e;s.set(n.subarray(a,a+f),i),o-=f,a+=f,d-=f,i+=f,t.length-=f;break}t.mode=Ee;break;case Ka:for(;u<14;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if(t.nlen=(l&31)+257,l>>>=5,u-=5,t.ndist=(l&31)+1,l>>>=5,u-=5,t.ncode=(l&15)+4,l>>>=4,u-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=L;break}t.have=0,t.mode=Ya;case Ya:for(;t.have<t.ncode;){for(;u<3;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}t.lens[$[t.have++]]=l&7,l>>>=3,u-=3}for(;t.have<19;)t.lens[$[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,E={bits:t.lenbits},I=or(iu,t.lens,0,19,t.lencode,0,t.work,E),t.lenbits=E.bits,I){e.msg="invalid code lengths set",t.mode=L;break}t.have=0,t.mode=Qa;case Qa:for(;t.have<t.nlen+t.ndist;){for(;R=t.lencode[l&(1<<t.lenbits)-1],w=R>>>24,S=R>>>16&255,p=R&65535,!(w<=u);){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if(p<16)l>>>=w,u-=w,t.lens[t.have++]=p;else{if(p===16){for(D=w+2;u<D;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if(l>>>=w,u-=w,t.have===0){e.msg="invalid bit length repeat",t.mode=L;break}_=t.lens[t.have-1],f=3+(l&3),l>>>=2,u-=2}else if(p===17){for(D=w+3;u<D;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}l>>>=w,u-=w,_=0,f=3+(l&7),l>>>=3,u-=3}else{for(D=w+7;u<D;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}l>>>=w,u-=w,_=0,f=11+(l&127),l>>>=7,u-=7}if(t.have+f>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=L;break}for(;f--;)t.lens[t.have++]=_}}if(t.mode===L)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=L;break}if(t.lenbits=9,E={bits:t.lenbits},I=or(Ii,t.lens,0,t.nlen,t.lencode,0,t.work,E),t.lenbits=E.bits,I){e.msg="invalid literal/lengths set",t.mode=L;break}if(t.distbits=6,t.distcode=t.distdyn,E={bits:t.distbits},I=or(Ni,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,E),t.distbits=E.bits,I){e.msg="invalid distances set",t.mode=L;break}if(t.mode=un,r===cn)break e;case un:t.mode=dn;case dn:if(o>=6&&d>=258){e.next_out=i,e.avail_out=d,e.next_in=a,e.avail_in=o,t.hold=l,t.bits=u,eu(e,g),i=e.next_out,s=e.output,d=e.avail_out,a=e.next_in,n=e.input,o=e.avail_in,l=t.hold,u=t.bits,t.mode===Ee&&(t.back=-1);break}for(t.back=0;R=t.lencode[l&(1<<t.lenbits)-1],w=R>>>24,S=R>>>16&255,p=R&65535,!(w<=u);){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if(S&&(S&240)===0){for(h=w,k=S,U=p;R=t.lencode[U+((l&(1<<h+k)-1)>>h)],w=R>>>24,S=R>>>16&255,p=R&65535,!(h+w<=u);){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}l>>>=h,u-=h,t.back+=h}if(l>>>=w,u-=w,t.back+=w,t.length=p,S===0){t.mode=si;break}if(S&32){t.back=-1,t.mode=Ee;break}if(S&64){e.msg="invalid literal/length code",t.mode=L;break}t.extra=S&15,t.mode=ei;case ei:if(t.extra){for(D=t.extra;u<D;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=ti;case ti:for(;R=t.distcode[l&(1<<t.distbits)-1],w=R>>>24,S=R>>>16&255,p=R&65535,!(w<=u);){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if((S&240)===0){for(h=w,k=S,U=p;R=t.distcode[U+((l&(1<<h+k)-1)>>h)],w=R>>>24,S=R>>>16&255,p=R&65535,!(h+w<=u);){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}l>>>=h,u-=h,t.back+=h}if(l>>>=w,u-=w,t.back+=w,S&64){e.msg="invalid distance code",t.mode=L;break}t.offset=p,t.extra=S&15,t.mode=ri;case ri:if(t.extra){for(D=t.extra;u<D;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=L;break}t.mode=ni;case ni:if(d===0)break e;if(f=g-d,t.offset>f){if(f=t.offset-f,f>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=L;break}f>t.wnext?(f-=t.wnext,y=t.wsize-f):y=t.wnext-f,f>t.length&&(f=t.length),v=t.window}else v=s,y=i-t.offset,f=t.length;f>d&&(f=d),d-=f,t.length-=f;do s[i++]=v[y++];while(--f);t.length===0&&(t.mode=dn);break;case si:if(d===0)break e;s[i++]=t.length,d--,t.mode=dn;break;case os:if(t.wrap){for(;u<32;){if(o===0)break e;o--,l|=n[a++]<<u,u+=8}if(g-=d,e.total_out+=g,t.total+=g,t.wrap&4&&g&&(e.adler=t.check=t.flags?q(t.check,s,g,i-g):fr(t.check,s,g,i-g)),g=d,t.wrap&4&&(t.flags?l:oi(l))!==t.check){e.msg="incorrect data check",t.mode=L;break}l=0,u=0}t.mode=ai;case ai:if(t.wrap&&t.flags){for(;u<32;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if(t.wrap&4&&l!==(t.total&4294967295)){e.msg="incorrect length check",t.mode=L;break}l=0,u=0}t.mode=ii;case ii:I=lu;break e;case L:I=Ui;break e;case Ci:return Wi;case Fi:default:return oe}return e.next_out=i,e.avail_out=d,e.next_in=a,e.avail_in=o,t.hold=l,t.bits=u,(t.wsize||g!==e.avail_out&&t.mode<L&&(t.mode<os||r!==Fa))&&Hi(e,e.output,e.next_out,g-e.avail_out),b-=e.avail_in,g-=e.avail_out,e.total_in+=b,e.total_out+=g,t.total+=g,t.wrap&4&&g&&(e.adler=t.check=t.flags?q(t.check,s,g,e.next_out-g):fr(t.check,s,g,e.next_out-g)),e.data_type=t.bits+(t.last?64:0)+(t.mode===Ee?128:0)+(t.mode===un||t.mode===is?256:0),(b===0&&g===0||r===Fa)&&I===lt&&(I=uu),I},bu=e=>{if(ct(e))return oe;let r=e.state;return r.window&&(r.window=null),e.state=null,lt},wu=(e,r)=>{if(ct(e))return oe;let t=e.state;return(t.wrap&2)===0?oe:(t.head=r,r.done=!1,lt)},Ru=(e,r)=>{let t=r.length,n,s,a;return ct(e)||(n=e.state,n.wrap!==0&&n.mode!==gn)?oe:n.mode===gn&&(s=1,s=fr(s,r,t,0),s!==n.check)?Ui:(a=Hi(e,r,t,t),a?(n.mode=Ci,Wi):(n.havedict=1,lt))},xu=Bi,Eu=zi,vu=Li,Su=mu,ku=ji,Tu=_u,Au=bu,Du=wu,Pu=Ru,Mu="pako inflate (from Nodeca project)",Se={inflateReset:xu,inflateReset2:Eu,inflateResetKeep:vu,inflateInit:Su,inflateInit2:ku,inflate:Tu,inflateEnd:Au,inflateGetHeader:Du,inflateSetDictionary:Pu,inflateInfo:Mu};function Ou(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Iu=Ou,qi=Object.prototype.toString,{Z_NO_FLUSH:Nu,Z_FINISH:Uu,Z_OK:gr,Z_STREAM_END:us,Z_NEED_DICT:ds,Z_STREAM_ERROR:Wu,Z_DATA_ERROR:ci,Z_MEM_ERROR:Cu}=Mt;function br(e){this.options=yn.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});let r=this.options;r.raw&&r.windowBits>=0&&r.windowBits<16&&(r.windowBits=-r.windowBits,r.windowBits===0&&(r.windowBits=-15)),r.windowBits>=0&&r.windowBits<16&&!(e&&e.windowBits)&&(r.windowBits+=32),r.windowBits>15&&r.windowBits<48&&(r.windowBits&15)===0&&(r.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Mi,this.strm.avail_out=0;let t=Se.inflateInit2(this.strm,r.windowBits);if(t!==gr)throw new Error(it[t]);if(this.header=new Iu,Se.inflateGetHeader(this.strm,this.header),r.dictionary&&(typeof r.dictionary=="string"?r.dictionary=pr.string2buf(r.dictionary):qi.call(r.dictionary)==="[object ArrayBuffer]"&&(r.dictionary=new Uint8Array(r.dictionary)),r.raw&&(t=Se.inflateSetDictionary(this.strm,r.dictionary),t!==gr)))throw new Error(it[t])}br.prototype.push=function(e,r){let t=this.strm,n=this.options.chunkSize,s=this.options.dictionary,a,i,o;if(this.ended)return!1;for(r===~~r?i=r:i=r===!0?Uu:Nu,qi.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),a=Se.inflate(t,i),a===ds&&s&&(a=Se.inflateSetDictionary(t,s),a===gr?a=Se.inflate(t,i):a===ci&&(a=ds));t.avail_in>0&&a===us&&t.state.wrap>0&&e[t.next_in]!==0;)Se.inflateReset(t),a=Se.inflate(t,i);switch(a){case Wu:case ci:case ds:case Cu:return this.onEnd(a),this.ended=!0,!1}if(o=t.avail_out,t.next_out&&(t.avail_out===0||a===us))if(this.options.to==="string"){let d=pr.utf8border(t.output,t.next_out),l=t.next_out-d,u=pr.buf2string(t.output,d);t.next_out=l,t.avail_out=n-l,l&&t.output.set(t.output.subarray(d,d+l),0),this.onData(u)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(a===gr&&o===0)){if(a===us)return a=Se.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};br.prototype.onData=function(e){this.chunks.push(e)};br.prototype.onEnd=function(e){e===gr&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=yn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Ts(e,r){let t=new br(r);if(t.push(e),t.err)throw t.msg||it[t.err];return t.result}function Fu(e,r){return r=r||{},r.raw=!0,Ts(e,r)}var Lu=br,Bu=Ts,zu=Fu,ju=Ts,Hu=Mt,qu={Inflate:Lu,inflate:Bu,inflateRaw:zu,ungzip:ju,constants:Hu},{Deflate:qh,deflate:$h,deflateRaw:Vh,gzip:Zh}=Yc,{Inflate:Jh,inflate:Xh,inflateRaw:Gh,ungzip:$u}=qu;var bn=$u;function $i(e){return"node"in e}var Xu=":";var Gu=new TextEncoder,Ku=new TextDecoder("utf-8"),Vi={0:!1,1:!0,2:!0,64:!0,65:!0,66:!0,129:!0,193:!0,514:!0,577:!0,578:!0,705:!0,706:!0,1024:!0,1025:!0,1026:!0,1089:!0,1090:!0,1153:!0,1154:!0,1217:!0,1218:!0,4096:!0,4098:!0},As=class{constructor(r){this.fs=r}open(r){let t=this.fs.realPath(r.node);this.fs.FS.isFile(r.node.mode)&&(r.file=this.fs.API.get(t))}close(r){if(!this.fs.FS.isFile(r.node.mode)||!r.file)return;let t=this.fs.realPath(r.node),n=r.flags,s=typeof n=="string"?parseInt(n,10):n;s&=8191;let a=!0;s in Vi&&(a=Vi[s]),a&&this.fs.API.put(t,r.file),r.file=void 0}read(r,t,n,s,a){if(s<=0||r.file===void 0||a>=(r.file.data.length||0))return 0;let i=Math.min(r.file.data.length-a,s);return t.set(r.file.data.subarray(a,a+i),n),i}write(r,t,n,s,a){var i;if(s<=0||r.file===void 0)return 0;if(r.node.timestamp=Date.now(),a+s>(((i=r.file)===null||i===void 0?void 0:i.data.length)||0)){let o=r.file.data?r.file.data:new Uint8Array;r.file.data=new Uint8Array(a+s),r.file.data.set(o)}return r.file.data.set(t.subarray(n,n+s),a),s}llseek(r,t,n){let s=t;if(n===1)s+=r.position;else if(n===2&&this.fs.FS.isFile(r.node.mode))if(r.file!==void 0)s+=r.file.data.length;else throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.EPERM);if(s<0)throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.EINVAL);return s}},Ds=class{constructor(r){this.fs=r}node(r){return $i(r)?r.node:r}getattr(r){let t=this.node(r);return{...this.fs.API.getattr(this.fs.realPath(t)),mode:t.mode,ino:t.id}}setattr(r,t){let n=this.node(r);for(let[s,a]of Object.entries(t))switch(s){case"mode":n.mode=a;break;case"timestamp":n.timestamp=a;break;case"size":{let i=a,o=this.fs.realPath(n);if(this.fs.FS.isFile(n.mode)&&i>=0){let d=this.fs.API.get(o),l=d.data?d.data:new Uint8Array;i!==l.length&&(i<l.length?d.data=d.data.slice(0,i):(d.data=new Uint8Array(i),d.data.set(l)),this.fs.API.put(o,d))}else console.warn("setattr size of",i,"on",n,"not yet implemented");break}default:console.warn("setattr",s,"of",a,"on",n,"not yet implemented");break}}lookup(r,t){let n=this.node(r),s=this.fs.PATH.join2(this.fs.realPath(n),t),a=this.fs.API.lookup(s);if(!a.ok)throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.ENOENT);return this.fs.createNode(n,t,a.mode,0)}mknod(r,t,n,s){let a=this.node(r),i=this.fs.PATH.join2(this.fs.realPath(a),t);return this.fs.API.mknod(i,n),this.fs.createNode(a,t,n,s)}rename(r,t,n){let s=this.node(r),a=this.node(t);this.fs.API.rename(s.parent?this.fs.PATH.join2(this.fs.realPath(s.parent),s.name):s.name,this.fs.PATH.join2(this.fs.realPath(a),n)),s.name=n,s.parent=a}unlink(r,t){this.fs.API.rmdir(this.fs.PATH.join2(this.fs.realPath(this.node(r)),t))}rmdir(r,t){this.fs.API.rmdir(this.fs.PATH.join2(this.fs.realPath(this.node(r)),t))}readdir(r){return this.fs.API.readdir(this.fs.realPath(this.node(r)))}symlink(r,t,n){throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.EPERM)}readlink(r){throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.EPERM)}},Ps=class{constructor(r){this._driveName=r.driveName,this._mountpoint=r.mountpoint,this.FS=r.FS,this.ERRNO_CODES=r.ERRNO_CODES}lookup(r){return this.request({method:"lookup",path:this.normalizePath(r)})}getmode(r){return this.request({method:"getmode",path:this.normalizePath(r)})}mknod(r,t){return this.request({method:"mknod",path:this.normalizePath(r),data:{mode:t}})}rename(r,t){return this.request({method:"rename",path:this.normalizePath(r),data:{newPath:this.normalizePath(t)}})}readdir(r){let t=this.request({method:"readdir",path:this.normalizePath(r)});return t.push("."),t.push(".."),t}rmdir(r){return this.request({method:"rmdir",path:this.normalizePath(r)})}get(r){let t=this.request({method:"get",path:this.normalizePath(r)});if(!t)throw new this.FS.ErrnoError(this.ERRNO_CODES.ENOENT);let n=t.content,s=t.format;switch(s){case"json":case"text":return{data:Gu.encode(n),format:s};case"base64":{let a=atob(n),i=a.length,o=new Uint8Array(i);for(let d=0;d<i;d++)o[d]=a.charCodeAt(d);return{data:o,format:s}}default:throw new this.FS.ErrnoError(this.ERRNO_CODES.ENOENT)}}put(r,t){switch(t.format){case"json":case"text":return this.request({method:"put",path:this.normalizePath(r),data:{format:t.format,data:Ku.decode(t.data)}});case"base64":{let n="";for(let s=0;s<t.data.byteLength;s++)n+=String.fromCharCode(t.data[s]);return this.request({method:"put",path:this.normalizePath(r),data:{format:t.format,data:btoa(n)}})}}}getattr(r){let t=this.request({method:"getattr",path:this.normalizePath(r)});return t.atime&&(t.atime=new Date(t.atime)),t.mtime&&(t.mtime=new Date(t.mtime)),t.ctime&&(t.ctime=new Date(t.ctime)),t.size=t.size||0,t}normalizePath(r){return r.startsWith(this._mountpoint)&&(r=r.slice(this._mountpoint.length)),this._driveName&&(r=`${this._driveName}${Xu}${r}`),r}},Ms=class extends Ps{constructor(r){super(r),this._baseUrl=r.baseUrl,this._browsingContextId=r.browsingContextId||""}request(r){let t=new XMLHttpRequest;t.open("POST",encodeURI(this.endpoint),!1);let n={data:r,browsingContextId:this._browsingContextId};try{t.send(JSON.stringify(n))}catch(s){console.error(s)}if(t.status>=400)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return JSON.parse(t.responseText)}get endpoint(){return`${this._baseUrl}api/drive`}},wn=class{constructor(r){this.FS=r.FS,this.PATH=r.PATH,this.ERRNO_CODES=r.ERRNO_CODES,this.API=this.createAPI(r),this.driveName=r.driveName,this.node_ops=new Ds(this),this.stream_ops=new As(this)}createAPI(r){if(!r.browsingContextId||!r.baseUrl)throw new Error("Cannot create service-worker API without current browsingContextId");return new Ms(r)}mount(r){return this.createNode(null,r.mountpoint,16895,0)}createNode(r,t,n,s){let a=this.FS;if(!a.isDir(n)&&!a.isFile(n))throw new a.ErrnoError(this.ERRNO_CODES.EINVAL);let i=a.createNode(r,t,n,s);return i.node_ops=this.node_ops,i.stream_ops=this.stream_ops,i}getMode(r){return this.API.getmode(r)}realPath(r){let t=[],n=r;for(t.push(n.name);n.parent!==n;)n=n.parent,t.push(n.name);return t.reverse(),this.PATH.join.apply(null,t)}};function Zi(e,r,t){if(e!==c.FS.filesystems.WORKERFS)return c.FS._mount(e,r,t);if("packages"in r&&r.packages)r.packages.forEach(n=>{wr(n.blob,n.metadata,t)});else throw new Error("Can't mount data. You must use the `packages` key when mounting with `WORKERFS` in webR.")}function Os(e,r){let t=location.origin+"/",n=new wn({FS:globalThis.FS,PATH:globalThis.PATH,ERRNO_CODES:globalThis.ERRNO_CODES,baseUrl:t,driveName:(r==null?void 0:r.driveName)||"",mountpoint:e,browsingContextId:(r==null?void 0:r.browsingContextId)||""});n.node_ops.readdir=n.node_ops.readdir.bind(n.node_ops),n.node_ops.getattr=n.node_ops.getattr.bind(n.node_ops),n.node_ops.setattr=n.node_ops.setattr.bind(n.node_ops),c.FS.mount(n,{},e)}function Ji(e,r){if(/\.tgz$|\.tar\.gz$|\.tar$/.test(e)){let t=c.downloadFileContent(e);if(t.status<200||t.status>=300)throw new Error("Can't download Emscripten filesystem image.");let{data:n,metadata:s}=Gi(t.response);wr(n,s,r)}else{let t=e.replace(/\.data\.gz$|\.data$|\.js.metadata$/,""),n=c.downloadFileContent(`${t}.js.metadata`);if(n.status<200||n.status>=300)throw new Error("Can't download Emscripten filesystem image metadata.");let s=JSON.parse(new TextDecoder().decode(n.response)),a=s.gzip?".data.gz":".data",i=c.downloadFileContent(`${t}${a}`);if(i.status<200||i.status>=300)throw new Error("Can't download Emscripten filesystem image data.");let o=i.response;s.gzip&&(o=bn(o).buffer),wr(o,s,r)}}function Xi(e,r){let t=require("fs");if(/\.tgz$|\.tar\.gz$|\.tar$/.test(e)){let n=t.readFileSync(e),{data:s,metadata:a}=Gi(n);wr(s,a,r)}else{let n=e.replace(/\.data\.gz$|\.data$|\.js.metadata$/,""),s=JSON.parse(t.readFileSync(`${n}.js.metadata`,"utf8")),a=s.gzip?".data.gz":".data",i=t.readFileSync(`${n}${a}`);s.gzip&&(i=bn(i).buffer),wr(i,s,r)}}function wr(e,r,t){if(z){let n=Buffer.from(e),s=c.FS.filesystems.WORKERFS;s.reader||(s.reader={readAsArrayBuffer:a=>new Uint8Array(a)}),r.files.forEach(a=>{let i=n.subarray(a.start,a.end);i.size=i.byteLength,i.slice=(b,g)=>{let f=i.subarray(b,g);return f.size=f.byteLength,f};let o=(t+a.filename).split("/"),d=o.pop();if(!d)throw new Error(`Invalid mount path "${t}${a.filename}".`);let l=o.join("/");c.FS.mkdirTree(l);let u=c.FS.lookupPath(l,{}).node;s.createNode(u,d,s.FILE_MODE,0,i)})}else c.FS._mount(c.FS.filesystems.WORKERFS,{packages:[{blob:new Blob([e]),metadata:r}]},t)}function Gi(e){let r=bn(e).buffer,t=Yu(r)||Qu(r);if(!t)throw new Error("Can't mount archive, no VFS metadata found.");let n=new DataView(r,512*t.block,t.len),s=JSON.parse(new TextDecoder().decode(n));return{data:r,metadata:s}}function Yu(e){let r=new DataView(e),t=r.getInt32(r.byteLength-16),n=r.getInt32(r.byteLength-8),s=r.getInt32(r.byteLength-4);return t!==2003133010||n===0||s===0?null:{block:n,len:s}}function Qu(e){let r=new TextDecoder,t=0;for(;t<e.byteLength;){let n=e.slice(t,t+512);if(t+=512,new Uint8Array(n).every(o=>o===0))return null;let s=r.decode(n.slice(156,157));if(/5|g|[A-Z]/.test(s))continue;let a=r.decode(n.slice(0,100)).replace(/\0+$/,""),i=parseInt(r.decode(n.slice(124,136)),8);if(a==".vfs-index.json")return{block:t/512,len:i};t+=512*Math.ceil(i/512)}return null}var eo=!1,to=!1,m;Object.assign(globalThis,{RCall:ue,RCharacter:ce,RComplex:pt,RDataFrame:Ve,RDouble:Je,REnvironment:ne,RInteger:Ht,RList:de,RLogical:se,RObject:x,RPairlist:$e,RRaw:gt,RString:Ze,RSymbol:H,destroy:Sn,getRWorkerClass:qt,initPersistentObjects:Tn,isRObject:Xe,keep:Ke,objs:F,purge:kn,shelters:Ae});var ro=function(e){if(!(!e||!e.type)){if(e.type==="init"){if(eo)throw new Error("Can't initialise worker multiple times.");let r=e;m=Sa(r),r.data.config.channelType=r.data.channelType,ad(r.data.config),eo=!0;return}m==null||m.resolveRequest(e)}};z?(require("worker_threads").parentPort.on("message",ro),globalThis.XMLHttpRequest=Qi().XMLHttpRequest):globalThis.onmessage=e=>ro(e.data);var Y;function td(e){switch(e.type){case"request":{let r=e,t=r.data.msg,n=(s,a)=>m==null?void 0:m.write(Xn(r.data.uuid,{type:"payload",data:s},a));try{switch(t.type){case"analyzePath":{let s=t,a=c.FS.analyzePath(s.data.path,s.data.dontResolveLastLink),i={isRoot:a.isRoot,exists:a.exists,error:a.error,name:a.name,path:a.path,parentExists:a.parentExists,parentPath:a.parentPath,object:a.exists?Ut(a.object):void 0,parentObject:a.parentExists?Ut(a.parentObject):void 0};n({obj:i,payloadType:"raw"});break}case"lookupPath":{let s=t,a=c.FS.lookupPath(s.data.path,{}).node;n({obj:Ut(a),payloadType:"raw"});break}case"mkdir":{let s=t;n({obj:Ut(c.FS.mkdir(s.data.path)),payloadType:"raw"});break}case"mount":{let s=t,a=s.data.type,i=s.data.mountpoint;if(a==="IDBFS"&&Y.channelType==xt.SharedArrayBuffer)throw new Error("The `IDBFS` filesystem type is not supported under the `SharedArrayBuffer` communication channel. The `PostMessage` communication channel must be used.");if(a==="DRIVEFS"){let o=s.data.options;Os(i,o)}else{let o=c.FS.filesystems[a];c.FS.mount(o,s.data.options,i)}n({obj:null,payloadType:"raw"});break}case"syncfs":{let s=t;c.FS.syncfs(s.data.populate,a=>{if(a)throw new Error(`Emscripten \`syncfs\` error: "${a}".`);n({obj:null,payloadType:"raw"})});break}case"readFile":{let a=t.data,i={obj:c.FS.readFile(a.path,{encoding:"binary",flags:a.flags}),payloadType:"raw"};n(i,[i.obj.buffer]);break}case"rename":{let s=t;n({obj:c.FS.rename(s.data.oldpath,s.data.newpath),payloadType:"raw"});break}case"rmdir":{let s=t;n({obj:c.FS.rmdir(s.data.path),payloadType:"raw"});break}case"writeFile":{let a=t.data,i=Uint8Array.from(Object.values(a.data));n({obj:c.FS.writeFile(a.path,i,{flags:a.flags}),payloadType:"raw"});break}case"unlink":{let s=t;n({obj:c.FS.unlink(s.data.path),payloadType:"raw"});break}case"unmount":{let s=t;n({obj:c.FS.unmount(s.data.path),payloadType:"raw"});break}case"newShelter":{let s=we();Ae.set(s,[]),n({payloadType:"raw",obj:s});break}case"shelterSize":{let s=t,a=Ae.get(s.data).length;n({payloadType:"raw",obj:a});break}case"shelterPurge":{kn(t.data),n({payloadType:"raw",obj:null});break}case"shelterDestroy":{let s=t;Sn(s.data.id,s.data.obj.obj.ptr),n({payloadType:"raw",obj:null});break}case"captureR":{let a=t.data,i=a.shelter,o={n:0};try{let d=Ns(a.code,a.options);M(d.result,o),M(d.output,o);let l=d.result;Ke(i,l);let u=d.output.length,b=[];for(let f=1;f<u+1;++f){let y=d.output.get(f),v=y.pluck(1,1).toString(),R=y.get(2);if(v==="stdout"||v==="stderr"){let w=R.toString();b.push({type:v,data:w})}else{Ke(i,R);let w={obj:{ptr:R.ptr,type:R.type(),methods:x.getMethods(R)},payloadType:"ptr"};b.push({type:v,data:w})}}let g={payloadType:"ptr",obj:{ptr:l.ptr,type:l.type(),methods:x.getMethods(l)}};n({payloadType:"raw",obj:{result:g,output:b,images:d.images}})}finally{C(o.n)}break}case"evalR":{let s=t,a=Rr(s.data.code,s.data.options);Ke(s.data.shelter,a),n({obj:{type:a.type(),ptr:a.ptr,methods:x.getMethods(a)},payloadType:"ptr"});break}case"evalRRaw":{let s=t,a=Rr(s.data.code,s.data.options);je(a);let i=()=>{throw new Error(`Can't convert object of type ${a.type()} to ${s.data.outputType}.`)};try{let o;switch(s.data.outputType){case"void":break;case"boolean":switch(a.type()){case"logical":o=a.toBoolean();break;default:i()}break;case"boolean[]":switch(a.type()){case"logical":o=a.toArray(),o.some(d=>d===null)&&i();break;default:i()}break;case"number":switch(a.type()){case"logical":o=a.toBoolean(),o=Number(o);break;case"integer":o=a.toNumber();break;case"double":o=a.toNumber();break;default:i()}break;case"number[]":switch(a.type()){case"logical":o=a.toArray(),o=o.map(d=>d===null?i():Number(d));break;case"integer":o=a.toArray(),o.some(d=>d===null)&&i();break;case"double":o=a.toArray(),o.some(d=>d===null)&&i();break;default:i()}break;case"string":switch(a.type()){case"character":o=a.toString();break;default:i()}break;case"string[]":switch(a.type()){case"character":o=a.toArray(),o.some(d=>d===null)&&i();break;default:i()}break;default:throw new Error("Unexpected output type in `evalRRaw().")}n({obj:o,payloadType:"raw"});break}finally{C(1)}}case"newRObject":{let s=t,a=nd(s.data.args,s.data.objType);Ke(s.data.shelter,a.obj.ptr),n(a);break}case"callRObjectMethod":{let a=t.data,i=a.payload?x.wrap(a.payload.obj.ptr):x,o=sd(i,a.prop,a.args);Gt(o)&&Ke(a.shelter,o.obj.ptr),n(o);break}case"invokeWasmFunction":{let s=t,a=c.getWasmTableEntry(s.data.ptr)(...s.data.args);n({payloadType:"raw",obj:a});break}case"installPackages":{let s=t,a=s.data.name,i=s.data.options.repos?s.data.options.repos:Y.repoUrl;typeof a=="string"&&(a=[a]),typeof i=="string"&&(i=[i]),Rr(`webr::install(
              c(${a.map(o=>'"'+o+'"').join(",")}),
              repos = c(${i.map(o=>'"'+o+'"').join(",")}),
              quiet = ${s.data.options.quiet?"TRUE":"FALSE"},
              mount = ${s.data.options.mount?"TRUE":"FALSE"}
            )`),n({obj:!0,payloadType:"raw"});break}default:throw new Error("Unknown event `"+t.type+"`")}}catch(s){let a=s,i={name:a.name,message:a.message,errno:a.errno,stack:a.stack};n({payloadType:"err",obj:i}),a instanceof ut&&(c._R_ContinueUnwind(a.cont),Fr())}break}default:throw new Error("Unknown event `"+e.type+"`")}}function Ut(e){let r={id:e.id,name:e.name,mode:e.mode,isFolder:e.isFolder,mounted:null,contents:{}};return e.isFolder&&e.contents&&(r.contents=Object.fromEntries(Object.entries(e.contents).map(([t,n])=>[t,Ut(n)]))),e.mounted!==null&&(r.mounted={mountpoint:e.mounted.mountpoint,root:Ut(e.mounted.root)}),r}function rd(e,r=[]){let t=new XMLHttpRequest;t.open("GET",e,!1),t.responseType="arraybuffer";try{r.forEach(n=>{let s=n.split(": ");t.setRequestHeader(s[0],s[1])})}catch{let n="An error occurred setting headers in XMLHttpRequest";return console.error(n),{status:400,response:n}}try{t.send(null);let n=z?JSON.parse(String(t.status)).data.statusCode:t.status;if(n>=200&&n<300)return{status:n,response:t.response};{let s=new TextDecoder().decode(t.response);return console.error(`Error fetching ${e} - ${s}`),{status:n,response:s}}}catch{return{status:400,response:"An error occurred in XMLHttpRequest"}}}function nd(e,r){let t=qt(r),n=Ye(e,Gt,a=>x.wrap(a.obj.ptr)),s=new t(...n);return{obj:{type:s.type(),ptr:s.ptr,methods:x.getMethods(s)},payloadType:"ptr"}}function sd(e,r,t){if(!(r in e))throw new ReferenceError(`${r} is not defined`);let n=e[r];if(typeof n!="function")throw Error("Requested property cannot be invoked");let s=n.apply(e,t.map(i=>i.payloadType==="ptr"?x.wrap(i.obj.ptr):Ye(i.obj,Gt,o=>x.wrap(o.obj.ptr))));return{obj:Ye(s,Xe,i=>({obj:{type:i.type(),ptr:i.ptr,methods:x.getMethods(i)},payloadType:"ptr"})),payloadType:"raw"}}function Ns(e,r={}){var a;let t=Object.assign({env:F.globalEnv,captureStreams:!0,captureConditions:!0,captureGraphics:typeof OffscreenCanvas<"u",withAutoprint:!1,throwJsException:!0,withHandlers:!0},Ye(r,Gt,i=>x.wrap(i.obj.ptr))),n={n:0},s=new ne({});M(s,n),c.setValue(c._R_Interactive,0,"i8");try{let i=new ne(t.env);if(M(i,n),i.type()!=="environment")throw new Error("Attempted to evaluate R code with invalid environment object");if(t.captureGraphics){if(typeof OffscreenCanvas>"u")throw new Error("This environment does not have support for OffscreenCanvas. Consider disabling plot capture using `captureGraphics: false`.");s.bind("canvas_options",new de(Object.assign({capture:!0},t.captureGraphics))),be(`{
        old_dev <- dev.cur()
        do.call(webr::canvas, canvas_options)
        new_dev <- dev.cur()
        old_cache <- webr::canvas_cache()
        plots <- numeric()
      }`,s)}let o=F.true.ptr,d=F.false.ptr,l=be("webr::eval_r",F.baseEnv),u=be("quote",F.baseEnv);M(l,n),M(u,n);let b=new x(e);M(b,n);let g=c._Rf_lang6(l.ptr,c._Rf_lang2(u.ptr,b.ptr),t.captureConditions?o:d,t.captureStreams?o:d,t.withAutoprint?o:d,t.withHandlers?o:d);M(g,n);let f=de.wrap(He(g,i));if(M(f,n),t.captureConditions&&t.throwJsException){let R=f.get("output").toArray().find(w=>w.get("type").toString()==="error");if(R){let w=R.pluck("data","call"),S=w&&w.type()==="call"?`\`${w.deparse()}\``:"unknown source",p=((a=R.pluck("data","message"))==null?void 0:a.toString())||"An error occurred evaluating R code.";throw new Error(`Error in ${S}: ${p}`)}}let y=[];if(t.captureGraphics){let v=be(`{
        new_cache <- webr::canvas_cache()
        plots <- setdiff(new_cache, old_cache)
      }`,s);M(v,n),y=v.toArray().map(R=>c.webr.canvas[R].offscreen.transferToImageBitmap())}return{result:f.get("result"),output:f.get("output"),images:y}}finally{c.setValue(c._R_Interactive,Y.interactive?1:0,"i8");let i=s.get("new_dev");t.captureGraphics&&i.type()!=="null"&&be(`{
        dev.off(new_dev)
        dev.set(old_dev)
        webr::canvas_destroy(plots)
      }`,s),C(n.n)}}function Rr(e,r={}){var s,a;r=Object.assign({captureGraphics:!1},r);let t={n:0},n=Ns(e,r);try{M(n.output,t),M(n.result,t);for(let i=1;i<=n.output.length;i++){let o=n.output.get(i),d=o.get("type").toString();switch(d){case"stdout":m==null||m.writeSystem({type:"console.log",data:o.get("data").toString()});break;case"stderr":m==null||m.writeSystem({type:"console.warn",data:o.get("data").toString()});break;case"message":m==null||m.writeSystem({type:"console.warn",data:((s=o.pluck("data","message"))==null?void 0:s.toString())||""});break;case"warning":m==null||m.writeSystem({type:"console.warn",data:`Warning message: 
${((a=o.pluck("data","message"))==null?void 0:a.toString())||""}`});break;default:m==null||m.writeSystem({type:"console.warn",data:`Output of type ${d}:`}),m==null||m.writeSystem({type:"console.warn",data:o.get("data").toJs()});break}}return n.result}finally{C(t.n)}}function ad(e){Y=e;let r={...e.REnv};if(!r.TZ){let t=new Intl.DateTimeFormat;r.TZ=t.resolvedOptions().timeZone}c.preRun=[],c.arguments=Y.RArgs,c.noExitRuntime=!0,c.noImageDecoding=!0,c.noAudioDecoding=!0,c.noInitialRun=!0,c.noWasmDecoding=!0,c.preRun.push(()=>{z&&(globalThis.FS=c.FS,globalThis.chan=m),Y.createLazyFilesystem&&c.createLazyFilesystem(),c.FS.mkdirTree(Y.homedir),c.ENV.HOME=Y.homedir,c.FS.chdir(Y.homedir),c.ENV=Object.assign(c.ENV,r),c.FS._mount=c.FS.mount,c.FS.mount=Zi}),m==null||m.setDispatchHandler(td),c.onRuntimeInitialized=()=>{m==null||m.run(Y.RArgs)},c.webr={UnwindProtectException:ut,evalR:Rr,captureR:Ns,channel:m,canvas:{},resolveInit:()=>{Tn(),m==null||m.setInterrupt(c._Rf_onintr),c.setValue(c._R_Interactive,Y.interactive?1:0,"i8"),Rr(`options(webr_pkg_repos="${Y.repoUrl}")`),m==null||m.resolve(),to=!0},setPrompt:t=>{m==null||m.write({type:"prompt",data:t})},readConsole:()=>{if(!m)throw new Error("Can't read console input without a communication channel");return to||c.webr.resolveInit(),m.inputOrDispatch()},handleEvents:()=>{m==null||m.handleEvents()},dataViewer:(t,n)=>{let s=de.wrap(t).toObject({depth:0});m==null||m.write({type:"view",data:{data:s,title:n}})},evalJs:(t,n=!1)=>{try{let s=null;if(n){let a=m==null?void 0:m.syncRequest({type:"eval-await",data:c.UTF8ToString(t)});if(a){if(a.data.error)throw new Error(a==null?void 0:a.data.error);s=a==null?void 0:a.data.result}else throw new Error("Empty sync response for `evalJs`.")}else s=(0,eval)(c.UTF8ToString(t));return new x(s).ptr}catch(s){if(s instanceof ut)c._R_ContinueUnwind(s.cont),Fr();else if(s===1/0)throw s;let a=c.allocateUTF8OnStack(`An error occurred during JavaScript evaluation:
  ${s.message}`);c._Rf_error(a)}return Fr(),0},setTimeoutWasm:(t,n,...s)=>{m==null||m.writeSystem({type:"setTimeoutWasm",data:{ptr:t,delay:n,args:s}})}},c.locateFile=t=>Y.baseUrl+t,c.downloadFileContent=rd,c.mountImageUrl=Ji,c.mountImagePath=Xi,c.mountDriveFS=Os,c.print=t=>{m==null||m.write({type:"stdout",data:t})},c.printErr=t=>{m==null||m.write({type:"stderr",data:t})},globalThis.Module=c,m!=null&&m.WebSocketProxy&&(globalThis.WebSocket=m.WebSocketProxy),m!=null&&m.WorkerProxy&&(globalThis.Worker=m.WorkerProxy),setTimeout(()=>{let t=`${Y.baseUrl}R.js`;Bt(t)})}
/*! Bundled license information:

xmlhttprequest-ssl/lib/XMLHttpRequest.js:
  (**
   * Wrapper for built-in http.js to emulate the browser XMLHttpRequest object.
   *
   * This can be used with JS designed for browsers to improve reuse of code and
   * allow the use of existing libraries.
   *
   * Usage: include("XMLHttpRequest.js") and use XMLHttpRequest per W3C specs.
   *
   * @author Dan DeFelippi <dan@driverdan.com>
   * @contributor David Ellis <d.f.ellis@ieee.org>
   * @license MIT
   *)

pako/dist/pako.esm.mjs:
  (*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) *)
*/
//# sourceMappingURL=webr-worker.js.map
